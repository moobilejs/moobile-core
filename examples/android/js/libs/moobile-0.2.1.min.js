/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(i,E){var u=Math,n=E.createElement("div").style,z=(function(){var H="t,webkitT,MozT,msT,OT".split(","),G,F=0,m=H.length;for(;F<m;F++){G=H[F]+"ransform";if(G in n){return H[F].substr(0,H[F].length-1)}}return false})(),D=z?"-"+z.toLowerCase()+"-":"",l=s("transform"),x=s("transitionProperty"),k=s("transitionDuration"),o=s("transformOrigin"),B=s("transitionTimingFunction"),e=s("transitionDelay"),A=(/android/gi).test(navigator.appVersion),h=(/iphone|ipad/gi).test(navigator.appVersion),r=(/hp-tablet/gi).test(navigator.appVersion),j=s("perspective") in n,y="ontouchstart" in i&&!r,d=z!==false,f=s("transition") in n,g="onorientationchange" in i?"orientationchange":"resize",b=y?"touchstart":"mousedown",t=y?"touchmove":"mousemove",c=y?"touchend":"mouseup",w=y?"touchcancel":"mouseup",a=(function(){if(z===false){return false}var m={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return m[z]})(),q=(function(){return i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),p=(function(){return i.cancelRequestAnimationFrame||i.webkitCancelAnimationFrame||i.webkitCancelRequestAnimationFrame||i.mozCancelRequestAnimationFrame||i.oCancelRequestAnimationFrame||i.msCancelRequestAnimationFrame||clearTimeout})(),C=j?" translateZ(0)":"",v=function(G,m){var H=this,F;H.wrapper=typeof G=="object"?G:E.getElementById(G);H.wrapper.style.overflow="hidden";H.scroller=H.wrapper.children[0];H.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:A,hideScrollbar:h,fadeScrollbar:h&&j,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(I){I.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(F in m){H.options[F]=m[F]}H.x=H.options.x;H.y=H.options.y;H.options.useTransform=d&&H.options.useTransform;H.options.hScrollbar=H.options.hScroll&&H.options.hScrollbar;H.options.vScrollbar=H.options.vScroll&&H.options.vScrollbar;H.options.zoom=H.options.useTransform&&H.options.zoom;H.options.useTransition=f&&H.options.useTransition;if(H.options.zoom&&A){C=""}H.scroller.style[x]=H.options.useTransform?D+"transform":"top left";H.scroller.style[k]="0";H.scroller.style[o]="0 0";if(H.options.useTransition){H.scroller.style[B]="cubic-bezier(0.33,0.66,0.66,1)"}if(H.options.useTransform){H.scroller.style[l]="translate("+H.x+"px,"+H.y+"px)"+C}else{H.scroller.style.cssText+=";position:absolute;top:"+H.y+"px;left:"+H.x+"px"}if(H.options.useTransition){H.options.fixedScrollbar=true}H.refresh();H._bind(g,i);H._bind(b);if(!y){if(H.options.wheelAction!="none"){H._bind("DOMMouseScroll");H._bind("mousewheel")}}if(H.options.checkDOMChanges){H.checkDOMTime=setInterval(function(){H._checkDOMChanges()},500)}};v.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(F){var m=this;switch(F.type){case b:if(!y&&F.button!==0){return}m._start(F);break;case t:m._move(F);break;case c:case w:m._end(F);break;case g:m._resize();break;case"DOMMouseScroll":case"mousewheel":m._wheel(F);break;case a:m._transitionEnd(F);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var G=this,F;if(!G[m+"Scrollbar"]){if(G[m+"ScrollbarWrapper"]){if(d){G[m+"ScrollbarIndicator"].style[l]=""}G[m+"ScrollbarWrapper"].parentNode.removeChild(G[m+"ScrollbarWrapper"]);G[m+"ScrollbarWrapper"]=null;G[m+"ScrollbarIndicator"]=null}return}if(!G[m+"ScrollbarWrapper"]){F=E.createElement("div");if(G.options.scrollbarClass){F.className=G.options.scrollbarClass+m.toUpperCase()}else{F.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(G.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(G.hScrollbar?"7":"2")+"px;top:2px;right:1px")}F.style.cssText+=";pointer-events:none;"+D+"transition-property:opacity;"+D+"transition-duration:"+(G.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(G.options.hideScrollbar?"0":"1");G.wrapper.appendChild(F);G[m+"ScrollbarWrapper"]=F;F=E.createElement("div");if(!G.options.scrollbarClass){F.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+D+"background-clip:padding-box;"+D+"box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";"+D+"border-radius:3px;border-radius:3px"}F.style.cssText+=";pointer-events:none;"+D+"transition-property:"+D+"transform;"+D+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+D+"transition-duration:0;"+D+"transform: translate(0,0)"+C;if(G.options.useTransition){F.style.cssText+=";"+D+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}G[m+"ScrollbarWrapper"].appendChild(F);G[m+"ScrollbarIndicator"]=F}if(m=="h"){G.hScrollbarSize=G.hScrollbarWrapper.clientWidth;G.hScrollbarIndicatorSize=u.max(u.round(G.hScrollbarSize*G.hScrollbarSize/G.scrollerW),8);G.hScrollbarIndicator.style.width=G.hScrollbarIndicatorSize+"px";G.hScrollbarMaxScroll=G.hScrollbarSize-G.hScrollbarIndicatorSize;G.hScrollbarProp=G.hScrollbarMaxScroll/G.maxScrollX}else{G.vScrollbarSize=G.vScrollbarWrapper.clientHeight;G.vScrollbarIndicatorSize=u.max(u.round(G.vScrollbarSize*G.vScrollbarSize/G.scrollerH),8);G.vScrollbarIndicator.style.height=G.vScrollbarIndicatorSize+"px";G.vScrollbarMaxScroll=G.vScrollbarSize-G.vScrollbarIndicatorSize;G.vScrollbarProp=G.vScrollbarMaxScroll/G.maxScrollY}G._scrollbarPos(m,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},A?200:0)},_pos:function(m,F){if(this.zoomed){return}m=this.hScroll?m:0;F=this.vScroll?F:0;if(this.options.useTransform){this.scroller.style[l]="translate("+m+"px,"+F+"px) scale("+this.scale+")"+C}else{m=u.round(m);F=u.round(F);this.scroller.style.left=m+"px";this.scroller.style.top=F+"px"}this.x=m;this.y=F;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,H){var G=this,I=m=="h"?G.x:G.y,F;if(!G[m+"Scrollbar"]){return}I=G[m+"ScrollbarProp"]*I;if(I<0){if(!G.options.fixedScrollbar){F=G[m+"ScrollbarIndicatorSize"]+u.round(I*3);if(F<8){F=8}G[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=F+"px"}I=0}else{if(I>G[m+"ScrollbarMaxScroll"]){if(!G.options.fixedScrollbar){F=G[m+"ScrollbarIndicatorSize"]-u.round((I-G[m+"ScrollbarMaxScroll"])*3);if(F<8){F=8}G[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=F+"px";I=G[m+"ScrollbarMaxScroll"]+(G[m+"ScrollbarIndicatorSize"]-F)}else{I=G[m+"ScrollbarMaxScroll"]}}}G[m+"ScrollbarWrapper"].style[e]="0";G[m+"ScrollbarWrapper"].style.opacity=H&&G.options.hideScrollbar?"0":"1";G[m+"ScrollbarIndicator"].style[l]="translate("+(m=="h"?I+"px,0)":"0,"+I+"px)")+C},_start:function(K){var J=this,F=y?K.touches[0]:K,G,m,L,I,H;if(!J.enabled){return}if(J.options.onBeforeScrollStart){J.options.onBeforeScrollStart.call(J,K)}if(J.options.useTransition||J.options.zoom){J._transitionTime(0)}J.moved=false;J.animating=false;J.zoomed=false;J.distX=0;J.distY=0;J.absDistX=0;J.absDistY=0;J.dirX=0;J.dirY=0;if(J.options.zoom&&y&&K.touches.length>1){I=u.abs(K.touches[0].pageX-K.touches[1].pageX);H=u.abs(K.touches[0].pageY-K.touches[1].pageY);J.touchesDistStart=u.sqrt(I*I+H*H);J.originX=u.abs(K.touches[0].pageX+K.touches[1].pageX-J.wrapperOffsetLeft*2)/2-J.x;J.originY=u.abs(K.touches[0].pageY+K.touches[1].pageY-J.wrapperOffsetTop*2)/2-J.y;if(J.options.onZoomStart){J.options.onZoomStart.call(J,K)}}if(J.options.momentum){if(J.options.useTransform){G=getComputedStyle(J.scroller,null)[l].replace(/[^0-9\-.,]/g,"").split(",");m=+(G[12]||G[4]);L=+(G[13]||G[5])}else{m=+getComputedStyle(J.scroller,null).left.replace(/[^0-9-]/g,"");L=+getComputedStyle(J.scroller,null).top.replace(/[^0-9-]/g,"")}if(m!=J.x||L!=J.y){if(J.options.useTransition){J._unbind(a)}else{p(J.aniTime)}J.steps=[];J._pos(m,L);if(J.options.onScrollEnd){J.options.onScrollEnd.call(J)}}}J.absStartX=J.x;J.absStartY=J.y;J.startX=J.x;J.startY=J.y;J.pointX=F.pageX;J.pointY=F.pageY;J.startTime=K.timeStamp||Date.now();if(J.options.onScrollStart){J.options.onScrollStart.call(J,K)}J._bind(t,i);J._bind(c,i);J._bind(w,i)},_move:function(M){var K=this,N=y?M.touches[0]:M,I=N.pageX-K.pointX,G=N.pageY-K.pointY,m=K.x+I,O=K.y+G,J,H,F,L=M.timeStamp||Date.now();if(K.options.onBeforeScrollMove){K.options.onBeforeScrollMove.call(K,M)}if(K.options.zoom&&y&&M.touches.length>1){J=u.abs(M.touches[0].pageX-M.touches[1].pageX);H=u.abs(M.touches[0].pageY-M.touches[1].pageY);K.touchesDist=u.sqrt(J*J+H*H);K.zoomed=true;F=1/K.touchesDistStart*K.touchesDist*this.scale;if(F<K.options.zoomMin){F=0.5*K.options.zoomMin*Math.pow(2,F/K.options.zoomMin)}else{if(F>K.options.zoomMax){F=2*K.options.zoomMax*Math.pow(0.5,K.options.zoomMax/F)}}K.lastScale=F/this.scale;m=this.originX-this.originX*K.lastScale+this.x,O=this.originY-this.originY*K.lastScale+this.y;this.scroller.style[l]="translate("+m+"px,"+O+"px) scale("+F+")"+C;if(K.options.onZoom){K.options.onZoom.call(K,M)}return}K.pointX=N.pageX;K.pointY=N.pageY;if(m>0||m<K.maxScrollX){m=K.options.bounce?K.x+(I/2):m>=0||K.maxScrollX>=0?0:K.maxScrollX}if(O>K.minScrollY||O<K.maxScrollY){O=K.options.bounce?K.y+(G/2):O>=K.minScrollY||K.maxScrollY>=0?K.minScrollY:K.maxScrollY}K.distX+=I;K.distY+=G;K.absDistX=u.abs(K.distX);K.absDistY=u.abs(K.distY);if(K.absDistX<6&&K.absDistY<6){return}if(K.options.lockDirection){if(K.absDistX>K.absDistY+5){O=K.y;G=0}else{if(K.absDistY>K.absDistX+5){m=K.x;I=0}}}K.moved=true;K._pos(m,O);K.dirX=I>0?-1:I<0?1:0;K.dirY=G>0?-1:G<0?1:0;if(L-K.startTime>300){K.startTime=L;K.startX=K.x;K.startY=K.y}if(K.options.onScrollMove){K.options.onScrollMove.call(K,M)}},_end:function(M){if(y&&M.touches.length!==0){return}var K=this,S=y?M.changedTouches[0]:M,N,R,G={dist:0,time:0},m={dist:0,time:0},J=(M.timeStamp||Date.now())-K.startTime,O=K.x,L=K.y,Q,P,F,I,H;K._unbind(t,i);K._unbind(c,i);K._unbind(w,i);if(K.options.onBeforeScrollEnd){K.options.onBeforeScrollEnd.call(K,M)}if(K.zoomed){H=K.scale*K.lastScale;H=Math.max(K.options.zoomMin,H);H=Math.min(K.options.zoomMax,H);K.lastScale=H/K.scale;K.scale=H;K.x=K.originX-K.originX*K.lastScale+K.x;K.y=K.originY-K.originY*K.lastScale+K.y;K.scroller.style[k]="200ms";K.scroller.style[l]="translate("+K.x+"px,"+K.y+"px) scale("+K.scale+")"+C;K.zoomed=false;K.refresh();if(K.options.onZoomEnd){K.options.onZoomEnd.call(K,M)}return}if(!K.moved){if(y){if(K.doubleTapTimer&&K.options.zoom){clearTimeout(K.doubleTapTimer);K.doubleTapTimer=null;if(K.options.onZoomStart){K.options.onZoomStart.call(K,M)}K.zoom(K.pointX,K.pointY,K.scale==1?K.options.doubleTapZoom:1);if(K.options.onZoomEnd){setTimeout(function(){K.options.onZoomEnd.call(K,M)},200)}}else{if(this.options.handleClick){K.doubleTapTimer=setTimeout(function(){K.doubleTapTimer=null;N=S.target;while(N.nodeType!=1){N=N.parentNode}if(N.tagName!="SELECT"&&N.tagName!="INPUT"&&N.tagName!="TEXTAREA"){R=E.createEvent("MouseEvents");R.initMouseEvent("click",true,true,M.view,1,S.screenX,S.screenY,S.clientX,S.clientY,M.ctrlKey,M.altKey,M.shiftKey,M.metaKey,0,null);R._fake=true;N.dispatchEvent(R)}},K.options.zoom?250:0)}}}K._resetPos(400);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,M)}return}if(J<300&&K.options.momentum){G=O?K._momentum(O-K.startX,J,-K.x,K.scrollerW-K.wrapperW+K.x,K.options.bounce?K.wrapperW:0):G;m=L?K._momentum(L-K.startY,J,-K.y,(K.maxScrollY<0?K.scrollerH-K.wrapperH+K.y-K.minScrollY:0),K.options.bounce?K.wrapperH:0):m;O=K.x+G.dist;L=K.y+m.dist;if((K.x>0&&O>0)||(K.x<K.maxScrollX&&O<K.maxScrollX)){G={dist:0,time:0}}if((K.y>K.minScrollY&&L>K.minScrollY)||(K.y<K.maxScrollY&&L<K.maxScrollY)){m={dist:0,time:0}}}if(G.dist||m.dist){F=u.max(u.max(G.time,m.time),10);if(K.options.snap){Q=O-K.absStartX;P=L-K.absStartY;if(u.abs(Q)<K.options.snapThreshold&&u.abs(P)<K.options.snapThreshold){K.scrollTo(K.absStartX,K.absStartY,200)}else{I=K._snap(O,L);O=I.x;L=I.y;F=u.max(I.time,F)}}K.scrollTo(u.round(O),u.round(L),F);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,M)}return}if(K.options.snap){Q=O-K.absStartX;P=L-K.absStartY;if(u.abs(Q)<K.options.snapThreshold&&u.abs(P)<K.options.snapThreshold){K.scrollTo(K.absStartX,K.absStartY,200)}else{I=K._snap(K.x,K.y);if(I.x!=K.x||I.y!=K.y){K.scrollTo(I.x,I.y,I.time)}}if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,M)}return}K._resetPos(200);if(K.options.onTouchEnd){K.options.onTouchEnd.call(K,M)}},_resetPos:function(G){var m=this,H=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,F=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(H==m.x&&F==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(z=="webkit"){m.hScrollbarWrapper.style[e]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(z=="webkit"){m.vScrollbarWrapper.style[e]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(H,F,G||0)},_wheel:function(J){var H=this,I,G,F,m,K;if("wheelDeltaX" in J){I=J.wheelDeltaX/12;G=J.wheelDeltaY/12}else{if("wheelDelta" in J){I=G=J.wheelDelta/12}else{if("detail" in J){I=G=-J.detail*3}else{return}}}if(H.options.wheelAction=="zoom"){K=H.scale*Math.pow(2,1/3*(G?G/Math.abs(G):0));if(K<H.options.zoomMin){K=H.options.zoomMin}if(K>H.options.zoomMax){K=H.options.zoomMax}if(K!=H.scale){if(!H.wheelZoomCount&&H.options.onZoomStart){H.options.onZoomStart.call(H,J)}H.wheelZoomCount++;H.zoom(J.pageX,J.pageY,K,400);setTimeout(function(){H.wheelZoomCount--;if(!H.wheelZoomCount&&H.options.onZoomEnd){H.options.onZoomEnd.call(H,J)}},400)}return}F=H.x+I;m=H.y+G;if(F>0){F=0}else{if(F<H.maxScrollX){F=H.maxScrollX}}if(m>H.minScrollY){m=H.minScrollY}else{if(m<H.maxScrollY){m=H.maxScrollY}}if(H.maxScrollY<0){H.scrollTo(F,m,0)}},_transitionEnd:function(F){var m=this;if(F.target!=m.scroller){return}m._unbind(a);m._startAni()},_startAni:function(){var K=this,F=K.x,m=K.y,I=Date.now(),J,H,G;if(K.animating){return}if(!K.steps.length){K._resetPos(400);return}J=K.steps.shift();if(J.x==F&&J.y==m){J.time=0}K.animating=true;K.moved=true;if(K.options.useTransition){K._transitionTime(J.time);K._pos(J.x,J.y);K.animating=false;if(J.time){K._bind(a)}else{K._resetPos(0)}return}G=function(){var L=Date.now(),N,M;if(L>=I+J.time){K._pos(J.x,J.y);K.animating=false;if(K.options.onAnimationEnd){K.options.onAnimationEnd.call(K)}K._startAni();return}L=(L-I)/J.time-1;H=u.sqrt(1-L*L);N=(J.x-F)*H+F;M=(J.y-m)*H+m;K._pos(N,M);if(K.animating){K.aniTime=q(G)}};G()},_transitionTime:function(m){m+="ms";this.scroller.style[k]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[k]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[k]=m}},_momentum:function(L,F,J,m,N){var K=0.0006,G=u.abs(L)/F,H=(G*G)/(2*K),M=0,I=0;if(L>0&&H>J){I=N/(6/(H/G*K));J=J+I;G=G*J/H;H=J}else{if(L<0&&H>m){I=N/(6/(H/G*K));m=m+I;G=G*m/H;H=m}}H=H*(L<0?-1:1);M=G/K;return{dist:H,time:u.round(M)}},_offset:function(m){var G=-m.offsetLeft,F=-m.offsetTop;while(m=m.offsetParent){G-=m.offsetLeft;F-=m.offsetTop}if(m!=this.wrapper){G*=this.scale;F*=this.scale}return{left:G,top:F}},_snap:function(M,L){var J=this,I,H,K,G,F,m;K=J.pagesX.length-1;for(I=0,H=J.pagesX.length;I<H;I++){if(M>=J.pagesX[I]){K=I;break}}if(K==J.currPageX&&K>0&&J.dirX<0){K--}M=J.pagesX[K];F=u.abs(M-J.pagesX[J.currPageX]);F=F?u.abs(J.x-M)/F*500:0;J.currPageX=K;K=J.pagesY.length-1;for(I=0;I<K;I++){if(L>=J.pagesY[I]){K=I;break}}if(K==J.currPageY&&K>0&&J.dirY<0){K--}L=J.pagesY[K];m=u.abs(L-J.pagesY[J.currPageY]);m=m?u.abs(J.y-L)/m*500:0;J.currPageY=K;G=u.round(u.max(F,m))||200;return{x:M,y:L,time:G}},_bind:function(G,F,m){(F||this.scroller).addEventListener(G,this,!!m)},_unbind:function(G,F,m){(F||this.scroller).removeEventListener(G,this,!!m)},destroy:function(){var m=this;m.scroller.style[l]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(g,i);m._unbind(b);m._unbind(t,i);m._unbind(c,i);m._unbind(w,i);if(!m.options.hasTouch){m._unbind("DOMMouseScroll");m._unbind("mousewheel")}if(m.options.useTransition){m._unbind(a)}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var H=this,J,G,m,F,K=0,I=0;if(H.scale<H.options.zoomMin){H.scale=H.options.zoomMin}H.wrapperW=H.wrapper.clientWidth||1;H.wrapperH=H.wrapper.clientHeight||1;H.minScrollY=-H.options.topOffset||0;H.scrollerW=u.round(H.scroller.offsetWidth*H.scale);H.scrollerH=u.round((H.scroller.offsetHeight+H.minScrollY)*H.scale);H.maxScrollX=H.wrapperW-H.scrollerW;H.maxScrollY=H.wrapperH-H.scrollerH+H.minScrollY;H.dirX=0;H.dirY=0;if(H.options.onRefresh){H.options.onRefresh.call(H)}H.hScroll=H.options.hScroll&&H.maxScrollX<0;H.vScroll=H.options.vScroll&&(!H.options.bounceLock&&!H.hScroll||H.scrollerH>H.wrapperH);H.hScrollbar=H.hScroll&&H.options.hScrollbar;H.vScrollbar=H.vScroll&&H.options.vScrollbar&&H.scrollerH>H.wrapperH;J=H._offset(H.wrapper);H.wrapperOffsetLeft=-J.left;H.wrapperOffsetTop=-J.top;if(typeof H.options.snap=="string"){H.pagesX=[];H.pagesY=[];F=H.scroller.querySelectorAll(H.options.snap);for(G=0,m=F.length;G<m;G++){K=H._offset(F[G]);K.left+=H.wrapperOffsetLeft;K.top+=H.wrapperOffsetTop;H.pagesX[G]=K.left<H.maxScrollX?H.maxScrollX:K.left*H.scale;H.pagesY[G]=K.top<H.maxScrollY?H.maxScrollY:K.top*H.scale}}else{if(H.options.snap){H.pagesX=[];while(K>=H.maxScrollX){H.pagesX[I]=K;K=K-H.wrapperW;I++}if(H.maxScrollX%H.wrapperW){H.pagesX[H.pagesX.length]=H.maxScrollX-H.pagesX[H.pagesX.length-1]+H.pagesX[H.pagesX.length-1]}K=0;I=0;H.pagesY=[];while(K>=H.maxScrollY){H.pagesY[I]=K;K=K-H.wrapperH;I++}if(H.maxScrollY%H.wrapperH){H.pagesY[H.pagesY.length]=H.maxScrollY-H.pagesY[H.pagesY.length-1]+H.pagesY[H.pagesY.length-1]}}}H._scrollbar("h");H._scrollbar("v");if(!H.zoomed){H.scroller.style[k]="0";H._resetPos(400)}},scrollTo:function(m,L,K,J){var I=this,H=m,G,F;I.stop();if(!H.length){H=[{x:m,y:L,time:K,relative:J}]}for(G=0,F=H.length;G<F;G++){if(H[G].relative){H[G].x=I.x-H[G].x;H[G].y=I.y-H[G].y}I.steps.push({x:H[G].x,y:H[G].y,time:H[G].time||0})}I._startAni()},scrollToElement:function(m,G){var F=this,H;m=m.nodeType?m:F.scroller.querySelector(m);if(!m){return}H=F._offset(m);H.left+=F.wrapperOffsetLeft;H.top+=F.wrapperOffsetTop;H.left=H.left>0?0:H.left<F.maxScrollX?F.maxScrollX:H.left;H.top=H.top>F.minScrollY?F.minScrollY:H.top<F.maxScrollY?F.maxScrollY:H.top;G=G===undefined?u.max(u.abs(H.left)*2,u.abs(H.top)*2):G;F.scrollTo(H.left,H.top,G)},scrollToPage:function(G,F,I){var H=this,m,J;I=I===undefined?400:I;if(H.options.onScrollStart){H.options.onScrollStart.call(H)}if(H.options.snap){G=G=="next"?H.currPageX+1:G=="prev"?H.currPageX-1:G;F=F=="next"?H.currPageY+1:F=="prev"?H.currPageY-1:F;G=G<0?0:G>H.pagesX.length-1?H.pagesX.length-1:G;F=F<0?0:F>H.pagesY.length-1?H.pagesY.length-1:F;H.currPageX=G;H.currPageY=F;m=H.pagesX[G];J=H.pagesY[F]}else{m=-H.wrapperW*G;J=-H.wrapperH*F;if(m<H.maxScrollX){m=H.maxScrollX}if(J<H.maxScrollY){J=H.maxScrollY}}H.scrollTo(m,J,I)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(t,i);this._unbind(c,i);this._unbind(w,i)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind(a)}else{p(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,J,I,H){var F=this,G=I/F.scale;if(!F.options.useTransform){return}F.zoomed=true;H=H===undefined?200:H;m=m-F.wrapperOffsetLeft-F.x;J=J-F.wrapperOffsetTop-F.y;F.x=m-m*G+F.x;F.y=J-J*G+F.y;F.scale=I;F.refresh();F.x=F.x>0?0:F.x<F.maxScrollX?F.maxScrollX:F.x;F.y=F.y>F.minScrollY?F.minScrollY:F.y<F.maxScrollY?F.maxScrollY:F.y;F.scroller.style[k]=H+"ms";F.scroller.style[l]="translate("+F.x+"px,"+F.y+"px) scale("+I+")"+C;F.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};function s(m){if(z===""){return m}m=m.charAt(0).toUpperCase()+m.substr(1);return z+m}n=null;if(typeof exports!=="undefined"){exports.iScroll=v}else{i.iScroll=v}})(window,document);Class.Binds=new Class({$bound:{},bound:function(a){return this.$bound[a]?this.$bound[a]:this.$bound[a]=this[a].bind(this)}});if(!window.Moobile){window.Moobile={}}(function(){var a=Events.prototype.fireEvent;Moobile.EventFirer=new Class({Implements:[Events,Options,Class.Binds],fireEvent:function(d,c,b){c=Array.from(c).include(this);if(!this.shouldFireEvent(d,c)){return this}this.willFireEvent(d,c);a.call(this,d,c,b);this.didFireEvent(d,c);return this},shouldFireEvent:function(c,b){return true},willFireEvent:function(c,b){},didFireEvent:function(c,b){}})})();if(!window.Moobile){window.Moobile={}}Moobile.Animation=new Class({Extends:Moobile.EventFirer,_name:null,_running:false,element:null,animationClass:null,animationProperties:{name:null,duration:null,"iteration-count":null,"animation-direction":null,"animation-timing-function":null,"animation-fill-mode":null,"animation-delay":null},initialize:function(b,a){this.setElement(b);this.setOptions(a);return this},setName:function(a){this._name=a;return this},getName:function(){return this._name},setElement:function(a){this.element=document.id(a);return this},getElement:function(){return this.element},setAnimationClass:function(a){this.animationClass=a;return this},getAnimationClass:function(){return this.animationClass},setAnimationName:function(a){this.animationProperties.name=a;return this},getAnimationName:function(){return this.animationProperties.name},setAnimationDuration:function(a){this.animationProperties.duration=a;return this},getAnimationDuration:function(){return this.animationProperties.duration},setAnimationIterationCount:function(a){this.animationProperties["iteration-count"]=a;return this},getAnimationIterationCount:function(){return this.animationProperties["iteration-count"]},setAnimationDirection:function(a){this.animationProperties.direction=a;return this},getAnimationDirection:function(){return this.animationProperties.direction},setAnimationTimingFunction:function(a){this.animationProperties["timing-function"]=a;return this},getAnimationTimingFunction:function(){return this.animationProperties["timing-function"]},setAnimationFillMode:function(a){this.animationProperties["fill-mode"]=a;return this},getAnimationFillMode:function(){return this.animationProperties["fill-mode"]},setAnimationDelay:function(a){this.animationProperties.delay=a;return this},getAnimationDelay:function(){return this.animationProperties.delay},attach:function(){this.element.addEvent("ownanimationend",this.bound("onAnimationEnd"));this.element.addClass(this.animationClass);Object.each(this.animationProperties,function(b,a){this.element.setStyle("animation-"+a,b)},this);return this},detach:function(){this.element.removeEvent("ownanimationend",this.bound("onAnimationEnd"));this.element.removeClass(this.animationClass);Object.each(this.animationProperties,function(b,a){this.element.setStyle("animation-"+a,null)},this);return this},start:function(){if(this._running){return this}this._running=true;this.fireEvent("start");this.attach();return this},stop:function(){if(this._running===false){return this}this._running=false;this.fireEvent("stop");this.detach();return this},isRunning:function(){return this._running},onAnimationEnd:function(a){if(this._running===false){return}if(this.element!==a.target){return}a.stop();this._running=false;this.fireEvent("end");this.detach()}});(function(){Browser.Device={name:"other"};if(Browser.Platform.ios){var a=navigator.userAgent.toLowerCase().match(/(ip(ad|od|hone))/)[0];Browser.Device[a]=true;Browser.Device.name=a}if(this.devicePixelRatio==2){Browser.hasHighResolution=true}Browser.isMobile=!["mac","linux","win"].contains(Browser.Platform.name)}).call(this);Browser.Features.Touch=(function(){try{document.createEvent("TouchEvent").initTouchEvent("touchstart");return true}catch(a){}return false})();Browser.Features.iOSTouch=(function(){var a="cantouch",c=document.html,f=false;if(!c.addEventListener){return false}var d=function(){c.removeEventListener(a,d,true);f=true};try{c.addEventListener(a,d,true);var e=document.createEvent("TouchEvent");e.initTouchEvent(a);c.dispatchEvent(e);return f}catch(b){}d();return false})();Browser.Platform.cordova=(window.Phonegap||window.Cordova||window.cordova)&&Browser.isMobile&&!Browser.safari;Class.extend({parse:function(a){a=a.trim();a=a.split(".");var c=window;for(var b=0;b<a.length;b++){if(c[a[b]]){c=c[a[b]]}else{return null}}return typeof c==="function"?c:null},instantiate:function(b){if(typeof b==="string"){b=Class.parse(b)}if(b===null){return null}b.$prototyping=true;var a=new b;delete b.$prototyping;var c=Array.prototype.slice.call(arguments,1);if(a.initialize){a.initialize.apply(a,c)}return a}});(function(){var a=Element.prototype.adopt;Element.implement({ingest:function(b){return this.adopt(document.id(b).childNodes)},adopt:function(){if(arguments.length===1){var b=arguments[0];if(typeof b==="string"){var c=Elements.from(b);if(c.length){return a.apply(this,c)}}}return a.apply(this,arguments)}})})();(function(){Element.from=function(c){switch(typeof c){case"object":return document.id(c);case"string":var b=document.createElement("div");b.innerHTML=c;return b.childNodes[0]||null}return null};var a={};Element.at=function(e,d,c){var b=a[e];if(b){var f=b.clone(true,true);if(c){c(f)}return f}d=d||false;new Moobile.Request({method:"get",async:d,url:e}).addEvent("success",function(g){b=Element.from(g);if(c){c(b.clone(true,true))}}).addEvent("failure",function(g){if(c){c(null)}}).send();if(b){a[e]=b}return !d?b.clone(true,true):null}})();(function(){Element.defineRole=function(a,b,c){console.log("[DEPRECATION NOTICE] Element.defineRole will be removed in version 0.3.");b=(b||Element).prototype;if(b.__roles__===undefined){b.__roles__={}}if(c instanceof Function){c={behavior:c}}b.__roles__[a]=Object.append({traversable:false},c)};Element.implement({setRole:function(a){return this.set("data-role",a)},getRole:function(a){return this.get("data-role")},getRoleDefinition:function(a){console.log("[DEPRECATION NOTICE] Element.getRoleDefinition will be removed in version 0.3.");return(a||this).__roles__?(a||this).__roles__[this.getRole()]:null},getRoleElement:function(a){console.log("[DEPRECATION NOTICE] Element.getRoleElement will be removed in version 0.3.");return this.getRoleElements(a)[0]||null},getRoleElements:function(c){console.log("[DEPRECATION NOTICE] Element.getRoleElements will be removed in version 0.3.");var b=this.ownsRoleElement.bind(this);var a=c?"[data-role="+c+"]":"[data-role]";return this.getElements(a).filter(b)},ownsRoleElement:function(a){console.log("[DEPRECATION NOTICE] Element.ownsRoleElement will be removed in version 0.3.");var b=a.parentNode;if(b){if(b===this){return true}if(b.get("data-role")){return false}return this.ownsRoleElement(b)}return false},executeDefinedRoles:function(a){console.log("[DEPRECATION NOTICE] Element.executeDefinedRoles will be removed in version 0.3.");a=a||this;this.getRoleElements().each(function(b){var d=b.getRoleDefinition(a);if(d){var c=d.behavior;if(c instanceof Function){c.call(a,b)}if(d.traversable){b.executeDefinedRoles(a)}}else{throw new Error("Role "+b.getRole()+" is undefined")}},this);return this}})})();Moobile.Component=new Class({Extends:Moobile.EventFirer,_name:null,_built:null,_ready:false,_window:null,_parent:null,_children:[],_visible:true,_display:true,_style:null,_events:{listeners:{},callbacks:{}},element:null,options:{className:null,styleName:null,tagName:"div"},initialize:function(d,c,b){this.element=Element.from(d);if(this.element===null){this.element=document.createElement(this.options.tagName)}this._name=b||this.element.get("data-name");c=c||{};for(var f in this.options){if(c[f]===undefined){var h=this.element.get("data-option-"+f.hyphenate());if(h!==null){try{h=JSON.parse(h)}catch(i){}c[f]=h}}}this.setOptions(c);var a=this.element;var g=document.contains(this.element);if(g){this.element=this.element.clone(true,true)}this._willBuild();this._build();this._didBuild();if(g){this.element.replaces(a)}this.element.store("moobile:component",this);this._built=true;return this},_build:function(){var a=this;var g=this.__roles__;var b=this.__attributes__;for(var d in b){var h=this.element.get(d);if(h!==null){var f=b[d];if(f instanceof Function){f.call(this,h)}}}var e=this.options.className;if(e){this.addClass(e)}var c=this.options.styleName;if(c){this.setStyle(c)}this.getRoleElements().each(function(i){var j=g[i.getRole()].handler;if(j instanceof Function){j.call(a,i)}});if(this.build){this.build.call(this);console.log('[DEPRECATION NOTICE] The method "build" will be removed in 0.5, use the "_build" method instead')}},_willBuild:function(){this.willBuild()},_didBuild:function(){this.didBuild()},addEvent:function(f,e,a){var c=f.split(":")[0];if(this.eventIsNative(c)){var b=this;var d=this._events.listeners;var g=this._events.callbacks;if(g[c]===undefined){g[c]=[];d[c]=function(h){b.fireEvent(c,h)}}g[c].include(e);if(g[c].length===1){this.element.addEvent(c,d[c])}}return this.parent(f,e,a)},removeEvent:function(c,b){if(Moobile.Component.hasNativeEvent(c)&&this.eventIsNative(c)){var a=this._events.listeners;var d=this._events.callbacks;if(d[c]&&d[c].contains(b)){d[c].erase(b);if(d[c].length===0){this.element.removeEvent(c,a[c]);delete a[c];delete d[c]}}}return this.parent(c,b)},eventIsNative:function(a){return Moobile.Component.hasNativeEvent(a)},addChildComponent:function(b,a){return this._addChildComponent(b,null,a)},addChildComponentInside:function(b,c,a){return this._addChildComponent(b,document.id(c)||this.getElement(c),a)},addChildComponentAfter:function(a,b){return this._addChildComponent(a,b,"after")},addChildComponentBefore:function(a,b){return this._addChildComponent(a,b,"before")},_addChildComponent:function(b,c,a){b.removeFromParentComponent();this._willAddChildComponent(b);if(c){c=document.id(c)||this.element.getElement(c)}else{c=this.element}var d=this.hasElement(b);if(d===false||a){document.id(b).inject(c,a)}this._children.splice(this._getChildComponentIndexForElement(b)||0,0,b);b.setParentComponent(this);b.setWindow(this._window);this._didAddChildComponent(b);return this},_willAddChildComponent:function(a){this.willAddChildComponent(a)},_didAddChildComponent:function(a){this.didAddChildComponent(a)},getChildComponent:function(a){return this._children.find(function(b){return b.getName()===a})},getChildComponentOfType:function(c,a){var b=Array.from(c);var d=function(e){return b.some(function(f){return e instanceof f&&e.getName()===a})};return this._children.find(d)},getChildComponentAt:function(a){return this._children[a]||null},getChildComponentOfTypeAt:function(b,a){return this.getChildComponentsOfType(b)[a]||null},getChildComponentIndex:function(a){return this._children.indexOf(a)},_getChildComponentIndexForElement:function(e){e=document.id(e);var c=-1;var a=this.element.querySelectorAll("*");for(var d=0;d<a.length;d++){var f=a[d];if(f===e){return c+1}else{var b=f.retrieve("moobile:component");if(b){var g=this.getChildComponentIndex(b);if(c<g){c=g}}}}return null},getChildComponents:function(){return this._children},getChildComponentsOfType:function(b){var a=Array.from(b);var c=function(d){return a.some(function(e){return d instanceof e})};return this._children.filter(c)},hasChildComponent:function(a){return this._children.contains(a)},hasChildComponentOfType:function(a){return this._children.some(function(b){return b instanceof a})},getDescendantComponent:function(c){var b=this.getChildComponent(c);if(b===null){for(var d=0,a=this._children.length;d<a;d++){var e=this._children[d].getDescendantComponent(c);if(e){return e}}}return b},replaceChildComponent:function(a,c,b){this.addChildComponentBefore(c,a).removeChildComponent(a,b);return this},replaceWithComponent:function(a,b){var c=this.getParentComponent();if(c){c.replaceChildComponent(this,a,b)}return this},removeChildComponent:function(a,c){if(this.hasChildComponent(a)===false){return this}this._willRemoveChildComponent(a);var b=a.getElement();if(b){b.dispose()}this._children.erase(a);a.setParentComponent(null);a.setWindow(null);a.setReady(false);this._didRemoveChildComponent(a);if(c){a.destroy()}return this},removeAllChildComponents:function(a){return this.removeAllChildComponentsOfType(Moobile.Component,a)},removeAllChildComponentsOfType:function(b,a){this._children.filter(function(c){return c instanceof b}).invoke("removeFromParentComponent",a);return this},removeFromParentComponent:function(a){var b=this.getParentComponent();if(b){b.removeChildComponent(this,a)}return this},_willRemoveChildComponent:function(a){this.willRemoveChildComponent(a)},_didRemoveChildComponent:function(a){this.didRemoveChildComponent(a)},setParentComponent:function(a){if(this._parent===a){return this}this._parentComponentWillChange(a);this._parent=a;this._parentComponentDidChange(a);return this},_parentComponentWillChange:function(a){this.parentComponentWillChange(a)},_parentComponentDidChange:function(a){if(a){if(this._display){this._visible=this._isVisible()}}else{this._visible=this._display}this.parentComponentDidChange(a)},getParentComponent:function(){return this._parent},hasParentComponent:function(){return !!this._parent},setWindow:function(a){if(this._window===a){return this}this._windowWillChange(a);this._window=a;this._windowDidChange(a);this._children.invoke("setWindow",a);if(this._window){this.setReady(true)}return this},_windowWillChange:function(a){this.windowWillChange(a)},_windowDidChange:function(a){this.windowDidChange(a)},getWindow:function(){return this._window},hasWindow:function(){return !!this._window},setReady:function(a){if(this._ready===a){return this}this._ready=a;if(this._ready){this._didBecomeReady()}this._children.invoke("setReady",a);return this},isReady:function(){return this._ready},getName:function(){return this._name},setStyle:function(a){if(this._style){this._style.detach.call(this,this.element);this._style=null}var b=Moobile.Component.getStyle(a,this);if(b){b.attach.call(this,this.element)}this._style=b;return this},getStyle:function(){return this._style?this._style.name:null},hasStyle:function(a){return this._style?this._style.name===a:false},addClass:function(a){this.element.addClass(a);return this},removeClass:function(a){this.element.removeClass(a);return this},toggleClass:function(a,b){this.element.toggleClass(a,b);return this},hasClass:function(a){return this.element.hasClass(a)},getElements:function(a){return this.element.getElements(a||"*")},getElement:function(a){return a?this.element.getElement(a):this.element},hasElement:function(a){return this.element===document.id(a)||this.element.contains(document.id(a))},getRoleElement:function(a){return this.getRoleElements(a,1)[0]||null},getRoleElements:function(c,b){var d=this.__roles__;var e=[];var a=function(j){if(b&&b<=e.length){return}var g=j.childNodes;for(var h=0,f=g.length;h<f;h++){var l=g[h];if(l.nodeType!==1){continue}var m=l.getRole();if(m===null){a(l);continue}var k=d[m];if(k){if(c===m||!c){e.push(l)}if(k.options.traversable){a(l);continue}}}};a(this.element);return e},setSize:function(a,b){if(a>0||a===null){this.element.setStyle("width",a)}if(b>0||b===null){this.element.setStyle("height",b)}return this},getSize:function(){return this.element.getSize()},getPosition:function(a){return this.element.getPosition(document.id(a)||this._parent)},show:function(){if(this._display===true||this._visible===true){return this}this._display=true;this._willShow();this.removeClass("hidden");this._didShow();return this},_willShow:function(){if(this._display===false||this._visible===true){return}this.willShow();this._children.invoke("_willShow")},_didShow:function(){if(this._display===false||this._visible===true){return}this._visible=true;this.didShow();this.fireEvent("show");this._children.invoke("_didShow")},hide:function(){if(this._display===false){return this}this._willHide();this.addClass("hidden");this._didHide();this._display=false;return this},_willHide:function(){if(this._display===false||this._visible===false){return}this.willHide();this._children.invoke("_willHide")},_didHide:function(){if(this._display===false||this._visible===false){return}this._visible=false;this.didHide();this.fireEvent("hide");this._children.invoke("_didHide")},isVisible:function(){return this._visible},_isVisible:function(){if(this._display){return this._parent?this._parent._isVisible():true}return false},willBuild:function(){},didBuild:function(){},_didBecomeReady:function(){this.didBecomeReady();this.fireEvent("ready")},didBecomeReady:function(){},willAddChildComponent:function(a){},didAddChildComponent:function(a){},willRemoveChildComponent:function(a){},didRemoveChildComponent:function(a){},parentComponentWillChange:function(a){},parentComponentDidChange:function(a){},windowWillChange:function(a){},windowDidChange:function(a){},willShow:function(){},willHide:function(){},didShow:function(){},didHide:function(){},destroy:function(){this.removeAllChildComponents(true);this.removeFromParentComponent();this.element.destroy();this.element=null;this._window=null;this._parent=null;return this},toElement:function(){return this.element},addChild:function(){console.log('[DEPRECATION NOTICE] The method "addChild" will be removed in 0.3, use the method "addChildComponent" instead');return this.addChildComponent.apply(this,arguments)},addChildInside:function(){console.log('[DEPRECATION NOTICE] The method "addChildInside" will be removed in 0.3, use the method "addChildComponentInside" instead');return this.addChildComponentInside.apply(this,arguments)},addChildAfter:function(){console.log('[DEPRECATION NOTICE] The method "addChildAfter" will be removed in 0.3, use the method "addChildComponentAfter" instead');return this.addChildComponentAfter.apply(this,arguments)},addChildBefore:function(){console.log('[DEPRECATION NOTICE] The method "addChildBefore" will be removed in 0.3, use the method "addChildComponentBefore" instead');return this.addChildComponentBefore.apply(this,arguments)},getChild:function(){console.log('[DEPRECATION NOTICE] The method "getChild" will be removed in 0.3, use the method "getChildComponent" instead');return this.getChildComponent.apply(this,arguments)},getChildOfType:function(){console.log('[DEPRECATION NOTICE] The method "getChildOfType" will be removed in 0.3, use the method "getChildComponentOfType" instead');return this.getChildComponentOfType.apply(this,arguments)},getChildAt:function(){console.log('[DEPRECATION NOTICE] The method "getChildAt" will be removed in 0.3, use the method "getChildComponentAt" instead');return this.getChildComponentAt.apply(this,arguments)},getChildOfTypeAt:function(){console.log('[DEPRECATION NOTICE] The method "getChildOfTypeAt" will be removed in 0.3, use the method "getChildComponentOfTypeAt" instead');return this.getChildComponentOfTypeAt.apply(this,arguments)},getChildIndex:function(){console.log('[DEPRECATION NOTICE] The method "getChildIndex" will be removed in 0.3, use the method "getChildComponentIndex" instead');return this.getChildComponentIndex.apply(this,arguments)},getChildren:function(){console.log('[DEPRECATION NOTICE] The method "getChildren" will be removed in 0.3, use the method "getChildComponents" instead');return this.getChildComponents.apply(this,arguments)},getChildrenOfType:function(){console.log('[DEPRECATION NOTICE] The method "getChildrenOfType" will be removed in 0.3, use the method "getChildComponentsOfType" instead');return this.getChildComponentsOfType.apply(this,arguments)},hasChild:function(){console.log('[DEPRECATION NOTICE] The method "hasChild" will be removed in 0.3, use the method "hasChildComponent" instead');return this.hasChildComponent.apply(this,arguments)},hasChildOfType:function(){console.log('[DEPRECATION NOTICE] The method "hasChildOfType" will be removed in 0.3, use the method "hasChildComponentOfType" instead');return this.hasChildComponentOfType.apply(this,arguments)},replaceChild:function(){console.log('[DEPRECATION NOTICE] The method "replaceChild" will be removed in 0.3, use the method "replaceChildComponent" instead');return this.replaceChildComponent.apply(this,arguments)},replaceWith:function(){console.log('[DEPRECATION NOTICE] The method "replaceWith" will be removed in 0.3, use the method "replaceWithComponent" instead');return this.replaceWithComponent.apply(this,arguments)},removeChild:function(){console.log('[DEPRECATION NOTICE] The method "removeChild" will be removed in 0.3, use the method "removeChildComponent" instead');return this.removeChildComponent.apply(this,arguments)},removeChildren:function(){console.log('[DEPRECATION NOTICE] The method "removeChildren" will be removed in 0.3, use the method "removeAllChildComponents" instead');return this.removeAllChildComponents.apply(this,arguments)},removeChildrenOfType:function(){console.log('[DEPRECATION NOTICE] The method "removeChildrenOfType" will be removed in 0.3, use the method "removeAllChildComponentsOfType" instead');return this.removeAllChildComponentsOfType.apply(this,arguments)},removeFromParent:function(){console.log('[DEPRECATION NOTICE] The method "removeFromParent" will be removed in 0.3, use the method "removeFromParentComponent" instead');return this.removeFromParentComponent.apply(this,arguments)},setParent:function(){console.log('[DEPRECATION NOTICE] The method "setParent" will be removed in 0.3, use the method "setParentComponent" instead');return this.setParentComponent.apply(this,arguments)},getParent:function(){console.log('[DEPRECATION NOTICE] The method "getParent" will be removed in 0.3, use the method "getParentComponent" instead');return this.getParentComponent.apply(this,arguments)},hasParent:function(){console.log('[DEPRECATION NOTICE] The method "hasParent" will be removed in 0.3, use the "hasParentComponent" instead');return this.hasParentComponent.apply(this,arguments)}});Moobile.Component.defineRole=function(b,c,a,d){c=(c||Moobile.Component).prototype;if(c.__roles__===undefined){c.__roles__={}}if(a){switch(typeof a){case"function":d=a;a={};break;case"object":if(typeof a.behavior==="function"){d=a.behavior}break}}c.__roles__[b]={handler:d||function(){},options:a||{}}};Moobile.Component.defineAttribute=function(a,b,c){b=(b||Moobile.Component).prototype;if(b.__attributes__===undefined){b.__attributes__={}}b.__attributes__[a]=c};Moobile.Component.defineStyle=function(a,d,c){var b=(d||Moobile.Component).prototype;if(b.__styles__===undefined){b.__styles__={}}b.__styles__[a]=Object.append({name:a,attach:function(){},detach:function(){}},c)};Moobile.Component.getStyle=function(a,b){return b.__styles__?b.__styles__[a]:null};Moobile.Component.create=function(b,f,g,e,d){f=Element.from(f);if(g){var c=f.get(g);if(c){var a=Class.instantiate(c,f,e,d);if(a instanceof b){return a}}}return new b(f,e,d)};(function(){var a=Object.keys(Element.NativeEvents);Moobile.Component.addNativeEvent=function(b){a.include(b)};Moobile.Component.hasNativeEvent=function(b){return a.contains(b)};Moobile.Component.removeNativeEvent=function(b){a.erase(b)};Moobile.Component.addNativeEvent("tapstart");Moobile.Component.addNativeEvent("tapmove");Moobile.Component.addNativeEvent("tapend");Moobile.Component.addNativeEvent("tap");Moobile.Component.addNativeEvent("pinch");Moobile.Component.addNativeEvent("swipe");Moobile.Component.addNativeEvent("animationend");Moobile.Component.addNativeEvent("transitionend");Moobile.Component.addNativeEvent("owntransitionend");Moobile.Component.addNativeEvent("ownanimationend")})();Moobile.Component.defineAttribute("data-style",null,function(a){this.options.styleName=a});Moobile.Control=new Class({Extends:Moobile.Component,_state:null,options:{className:null,styleName:null},_setState:function(b,a){if(this._state===b){return this}if(this.shouldAllowState(b)||b==null){this.willChangeState(b);if(this._state){this.removeClass("is-"+this._state)}this._state=b;if(this._state){this.addClass("is-"+this._state)}this.didChangeState(b)}return this},_getState:function(){return this._state},shouldAllowState:function(a){return["highlighted","selected","disabled"].contains(a)},setDisabled:function(a){return this._setState(a!==false?"disabled":null)},isDisabled:function(){return this._getState()=="disabled"},setSelected:function(a){return this._setState(a!==false?"selected":null)},isSelected:function(){return this._getState()=="selected"},setHighlighted:function(a){return this._setState(a!==false?"highlighted":null)},isHighlighted:function(){return this._getState()=="highlighted"},willChangeState:function(a){},didChangeState:function(a){},shouldFireEvent:function(b,a){return !this.isDisabled()}});Moobile.Button=new Class({Extends:Moobile.Control,_label:null,hitAreaElement:null,willBuild:function(){this.parent();this.addClass("button");var a=this.getRoleElement("label");if(a===null){a=document.createElement("div");a.ingest(this.element);a.inject(this.element);a.setRole("label")}this.addEvent("tapstart",this.bound("_onTapStart"));this.addEvent("tapend",this.bound("_onTapEnd"))},didBuild:function(){this.parent();this.hitAreaElement=new Element("div.hit-area");this.hitAreaElement.inject(this.element)},destroy:function(){this.removeEvent("tapstart",this.bound("_onTapStart"));this.removeEvent("tapend",this.bound("_onTapEnd"));this.label=null;this.parent()},setLabel:function(a){if(this._label===a){return this}a=Moobile.Text.from(a);if(this._label){this._label.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._label=a;this._label.addClass("button-label");this.toggleClass("button-label-empty",this._label.isEmpty());return this},getLabel:function(){return this._label},_onTapStart:function(a){if(!this.isSelected()){this.setHighlighted(true)}},_onTapEnd:function(a){if(!this.isSelected()){this.setHighlighted(false)}}});Moobile.Button.from=function(b){if(b instanceof Moobile.Button){return b}var a=new Moobile.Button();a.setLabel(b);return a};Moobile.Component.defineRole("button",null,null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Button,a,"data-button"))});Moobile.Component.defineRole("label",Moobile.Button,null,function(a){this.setLabel(Moobile.Component.create(Moobile.Text,a,"data-label"))});Moobile.Component.defineStyle("active",Moobile.Button,{attach:function(a){a.addClass("style-active")},detach:function(a){a.removeClass("style-active")}});Moobile.Component.defineStyle("warning",Moobile.Button,{attach:function(a){a.addClass("style-warning")},detach:function(a){a.removeClass("style-warning")}});Moobile.Component.defineStyle("back",Moobile.Button,{attach:function(a){a.addClass("style-back")},detach:function(a){a.removeClass("style-back")}});Moobile.Component.defineStyle("forward",Moobile.Button,{attach:function(a){a.addClass("style-forward")},detach:function(a){a.removeClass("style-forward")}});Moobile.ButtonGroup=new Class({Extends:Moobile.Control,_selectedButton:null,_selectedButtonIndex:-1,options:{layout:"horizontal",selectable:true,selectedButtonIndex:-1},willBuild:function(){this.parent();this.addClass("button-group");var a=this.options.layout;if(a){this.addClass("button-group-layout-"+a)}},didBuild:function(){this.parent();this.setSelectable(this.options.selectable);this.setSelectedButtonIndex(this.options.selectedButtonIndex)},destroy:function(){this._selectedButton=null;this._selectedButtonIndex=-1;this.parent()},setSelectedButton:function(a){if(this._selectable===false){return this}if(this._selectedButton===a){return this}if(this._selectedButton){this._selectedButton.setSelected(false);this.fireEvent("deselect",this._selectedButton);this._selectedButton=null}this._selectedButtonIndex=a?this.getChildComponentIndex(a):-1;if(a){this._selectedButton=a;this._selectedButton.setSelected(true);this.fireEvent("select",this._selectedButton)}return this},getSelectedButton:function(){return this._selectedButton},setSelectedButtonIndex:function(a){var b=null;if(a>=0){b=this.getChildComponentOfTypeAt(Moobile.Button,a)}return this.setSelectedButton(b)},getSelectedButtonIndex:function(){return this._selectedButtonIndex},clearSelectedButton:function(){this.setSelectedButton(null);return this},addButton:function(b,a){return this.addChildComponent(Moobile.Button.from(b),a)},addButtonAfter:function(a,b){return this.addChildComponentAfter(Moobile.Button.from(a),b)},addButtonBefore:function(a,b){return this.addChildComponentBefore(Moobile.Button.from(a),b)},getButtons:function(){return this.getChildComponentsOfType(Moobile.Button)},getButton:function(a){return this.getChildComponentOfType(Moobile.Button,a)},getButtonAt:function(a){return this.getChildComponentOfTypeAt(Moobile.Button,a)},removeButton:function(b,a){return this.removeChildComponent(b,a)},removeAllButtons:function(a){return this.removeAllChildComponentsOfType(Moobile.Button,a)},setSelectable:function(a){this._selectable=a;return this},isSelectable:function(){return this._selectable},willRemoveChildComponent:function(a){this.parent(a);if(this._selectedButton===a){this.clearSelectedButton()}},didAddChildComponent:function(a){this.parent(a);if(a instanceof Moobile.Button){a.addEvent("tap",this.bound("onButtonTap"))}},didRemoveChildComponent:function(a){this.parent(a);if(a instanceof Moobile.Button){a.removeEvent("tap",this.bound("onButtonTap"))}},didChangeState:function(a){this.parent(a);if(a==="disabled"||a==null){this.getChildComponents().invoke("setDisabled",a)}},onButtonTap:function(b,a){this.setSelectedButton(a)}});Moobile.Component.defineRole("button-group",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ButtonGroup,a,"data-button-group"))});Moobile.Bar=new Class({Extends:Moobile.Control,_item:null,willBuild:function(){this.parent();this.addClass("bar");var a=this.getRoleElement("item");if(a===null){a=document.createElement("div");a.ingest(this.element);a.inject(this.element);a.setRole("item")}},destroy:function(){this._item=null;this.parent()},setItem:function(a){if(this._item===a){return this}if(this._item){this._item.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._item=a;this._item.addClass("bar-item");return this},getItem:function(){return this._item}});Moobile.Component.defineRole("bar",null,null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Bar,a,"data-bar"))});Moobile.Component.defineStyle("dark",Moobile.Bar,{attach:function(a){a.addClass("style-dark")},detach:function(a){a.removeClass("style-dark")}});Moobile.Component.defineStyle("light",Moobile.Bar,{attach:function(a){a.addClass("style-light")},detach:function(a){a.removeClass("style-light")}});Moobile.BarItem=new Class({Extends:Moobile.Control,willBuild:function(){this.parent();this.addClass("bar-item")}});Moobile.Component.defineRole("item",Moobile.Bar,null,function(a){this.setItem(Moobile.Component.create(Moobile.BarItem,a,"data-item"))});Moobile.NavigationBar=new Class({Extends:Moobile.Bar,willBuild:function(){this.parent();this.addClass("navigation-bar")}});Moobile.Component.defineRole("navigation-bar",null,null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.NavigationBar,a,"data-navigation-bar"))});Moobile.NavigationBarItem=new Class({Extends:Moobile.BarItem,_title:null,willBuild:function(){this.parent();this.addClass("navigation-bar-item");var a=this.getRoleElement("title");if(a===null){a=document.createElement("div");a.ingest(this.element);a.inject(this.element);a.setRole("title")}var b=document.createElement("div");b.addClass("bar-title-wrapper");b.wraps(a)},destroy:function(){this._title=null;this.parent()},setTitle:function(a){if(this._title===a){return this}a=Moobile.Text.from(a);if(this._title){this._title.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._title=a;this._title.addClass("bar-title");this.toggleClass("bar-title-empty",this._title.isEmpty());return this},getTitle:function(){return this._title},addLeftButton:function(a){return this.addChildComponent(a,"top")},addRightButton:function(a){return this.addChildComponent(a,"bottom")},getButton:function(a){return this.getChildComponentOfType(Moobile.Button,a)},getButtonAt:function(a){return this.getChildComponentOfTypeAt(Moobile.Button,a)},removeButton:function(b,a){return this.removeChildComponent(b,a)},removeAllButtons:function(a){return this.removeAllChildComponents(Moobile.Button,a)}});Moobile.Component.defineRole("item",Moobile.NavigationBar,null,function(a){this.setItem(Moobile.Component.create(Moobile.NavigationBarItem,a,"data-item"))});Moobile.Component.defineRole("title",Moobile.NavigationBarItem,null,function(a){this.setTitle(Moobile.Component.create(Moobile.Text,a,"data-title"))});Moobile.Slider=new Class({Extends:Moobile.Component,_activeTouch:null,_activeTouchOffsetX:null,_activeTouchOffsetY:null,_activeTouchInitialThumbX:null,_activeTouchInitialThumbY:null,_position:{x:-1,y:-1},_value:null,_minimum:0,_maximum:0,_valueRange:null,_trackRange:null,_trackLimit:{min:0,max:0},trackElement:null,thumbElement:null,rangeElement:null,valueElement:null,hitAreaElement:null,options:{mode:"horizontal",snap:false,value:0,minimum:0,maximum:100},willBuild:function(){this.parent();this.addClass("slider");this.trackElement=document.createElement("div");this.trackElement.addClass("slider-track");this.trackElement.inject(this.element);this.thumbElement=document.createElement("div");this.thumbElement.addClass("slider-thumb");this.thumbElement.inject(this.trackElement);this.rangeElement=document.createElement("div");this.rangeElement.addClass("slider-range");this.rangeElement.inject(this.trackElement);this.valueElement=document.createElement("div");this.valueElement.addClass("slider-value");this.valueElement.inject(this.rangeElement);this.hitAreaElement=new Element("div.hit-area").inject(this.thumbElement);if("min" in this.options||"max" in this.options){console.log('[DEPRECATION NOTICE] The options "min" and "max" will be removed in 0.4, use the "minimum" and "maximum" options instead');if("min" in this.options){this.options.minimum=this.options.min}if("max" in this.options){this.options.maximum=this.options.max}}var a=this.options.mode;if(a){this.addClass("slider-mode-"+a)}},didBuild:function(){this.parent();this.element.addEvent("touchstart",this.bound("_onTouchStart"));this.element.addEvent("touchmove",this.bound("_onTouchMove"));this.element.addEvent("touchend",this.bound("_onTouchEnd"));this.thumbElement.addEvent("touchcancel",this.bound("_onThumbTouchCancel"));this.thumbElement.addEvent("touchstart",this.bound("_onThumbTouchStart"));this.thumbElement.addEvent("touchmove",this.bound("_onThumbTouchMove"));this.thumbElement.addEvent("touchend",this.bound("_onThumbTouchEnd"))},didBecomeReady:function(){this.parent();this.refresh();this.setMinimum(this.options.minimum);this.setMaximum(this.options.maximum);this.setValue(this.options.value)},destroy:function(){this.element.removeEvent("touchstart",this.bound("_onTouchStart"));this.element.removeEvent("touchmove",this.bound("_onTouchMove"));this.element.removeEvent("touchend",this.bound("_onTouchEnd"));this.thumbElement.removeEvent("touchcancel",this.bound("_onThumbTouchCancel"));this.thumbElement.removeEvent("touchstart",this.bound("_onThumbTouchStart"));this.thumbElement.removeEvent("touchmove",this.bound("_onThumbTouchMove"));this.thumbElement.removeEvent("touchend",this.bound("_onThumbTouchEnd"));this.thumbElement=null;this.trackElement=null;this.valueElement=null;this.rangeElement=null;this.parent()},setValue:function(a){var b=this._positionFromValue(a);this._move(b.x,b.y);return this},getValue:function(){return this._value},setMinimum:function(a){if(this._value<a){this.setValue(a)}this._minimum=a;this.refresh();return this},getMinimum:function(){return this._minimum},setMaximum:function(a){if(this._value>a){this.setValue(a)}this._maximum=a;this.refresh();return this},getMaximum:function(){return this._maximum},refresh:function(){var c=this.trackElement.getSize();var a=this.thumbElement.getSize();var b=0;switch(this.options.mode){case"horizontal":b=c.x-a.x;break;case"vertical":b=c.y-a.y;break}this._valueRange=this._maximum-this._minimum;this._trackRange=b;this._trackLimit={min:0,max:b};return this},_move:function(a,d){switch(this.options.mode){case"horizontal":d=0;if(a<this._trackLimit.min){a=this._trackLimit.min}if(a>this._trackLimit.max){a=this._trackLimit.max}break;case"vertical":a=0;if(d<this._trackLimit.min){d=this._trackLimit.min}if(d>this._trackLimit.max){d=this._trackLimit.max}break}var b=this._valueFromPosition(a,d);if(this.options.snap){b=b.round();var c=this._positionFromValue(b);a=c.x;d=c.y}if(this._position.x===a&&this._position.y===d){return this}this._value=b;this._position.x=a;this._position.y=d;this.thumbElement.setStyle("transform","translate3d("+a+"px, "+d+"px, 0)");this.valueElement.setStyle("transform","translate3d("+a+"px, "+d+"px, 0)");this.fireEvent("change",b);return this},_valueFromPosition:function(a,b){return(this.options.mode==="horizontal"?a:b)*this._valueRange/this._trackRange+this._minimum},_positionFromValue:function(b){var a=0;var d=0;var c=(b-this._minimum)*this._trackRange/this._valueRange;switch(this.options.mode){case"horizontal":a=c.round(2);break;case"vertical":d=c.round(2);break}return{x:a,y:d}},_onTouchStart:function(a){a.stop()},_onTouchMove:function(a){a.stop()},_onTouchEnd:function(a){a.stop()},_onThumbTouchCancel:function(a){this._activeTouch=null;this._activeTouchOffsetX=null;this._activeTouchOffsetY=null;this._activeTouchInitialThumbX=null;this._activeTouchInitialThumbY=null},_onThumbTouchStart:function(a){var b=a.changedTouches[0];if(this._activeTouch===null){this._activeTouch=b;this._activeTouchOffsetX=b.pageX;this._activeTouchOffsetY=b.pageY;this._activeTouchInitialThumbX=this._position.x;this._activeTouchInitialThumbY=this._position.y;this._bounds={min:0,max:this._trackRange}}},_onThumbTouchMove:function(b){var d=b.changedTouches[0];if(this._activeTouch.identifier===d.identifier){var a=d.pageX-this._activeTouchOffsetX+this._activeTouchInitialThumbX;var c=d.pageY-this._activeTouchOffsetY+this._activeTouchInitialThumbY;this._move(a,c)}},_onThumbTouchEnd:function(a){if(this._activeTouch.identifier===a.changedTouches[0].identifier){this._activeTouch=null;this._activeTouchOffsetX=null;this._activeTouchOffsetY=null;this._activeTouchInitialThumbX=null;this._activeTouchInitialThumbY=null}}});Moobile.Component.defineRole("slider",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Slider,a,"data-slider"))});Moobile.List=new Class({Extends:Moobile.Control,_selectable:true,_selectedItem:null,_selectedItemIndex:-1,options:{tagName:"ul",selectable:true,selectedItemIndex:-1},willBuild:function(){this.parent();this.addClass("list")},didBuild:function(){this.parent();this.setSelectable(this.options.selectable);this.setSelectedItemIndex(this.options.selectedItemIndex)},destroy:function(){this._selectedItem=null;this._selectedItemIndex=-1;this.parent()},setSelectedItem:function(a){if(this._selectable==false){return this}if(this._selectedItem===a){return this}if(this._selectedItem){this._selectedItem.setSelected(false);this.fireEvent("deselect",this._selectedItem);this._selectedItem=null}this._selectedItemIndex=a?this.getChildComponentIndex(a):-1;if(a){this._selectedItem=a;this._selectedItem.setSelected(true);this.fireEvent("select",this._selectedItem)}return this},getSelectedItem:function(){return this._selectedItem},setSelectedItemIndex:function(a){var b=null;if(a>=0){b=this.getChildComponentOfTypeAt(Moobile.ListItem,a)}return this.setSelectedItem(b)},getSelectedItemIndex:function(){return this._selectedItemIndex},clearSelectedItem:function(){this.setSelectedItem(null);return this},addItem:function(b,a){return this.addChildComponent(Moobile.ListItem.from(b),a)},addItemAfter:function(a,b){return this.addChildComponentAfter(Moobile.ListItem.from(a),b)},addItemBefore:function(a,b){return this.addChildComponentBefore(Moobile.ListItem.from(a),b)},getItem:function(a){return this.getChildComponentOfType(Moobile.ListItem,a)},getItemAt:function(a){return this.getChildComponentOfTypeAt(Moobile.ListItem,a)},getItemIndex:function(a){return this.getChildComponentIndex(a)},getItems:function(){return this.getChildComponentsOfType(Moobile.ListItem)},removeItem:function(a){return this.removeChildComponent(a)},removeAllItems:function(){return this.removeAllChildComponentsOfType(Moobile.ListItem)},setSelectable:function(a){this._selectable=a;return this},isSelectable:function(){return this._selectable},didAddChildComponent:function(a){this.parent(a);if(a instanceof Moobile.ListItem){a.addEvent("tapstart",this.bound("_onItemTapStart"));a.addEvent("tapend",this.bound("_onItemTapEnd"));a.addEvent("tap",this.bound("_onItemTap"))}var e=this.getChildComponents();for(var b=0;b<e.length;b++){var d=e[b-1];var c=e[b+1];var f=e[b];if(f.hasStyle("header")){if(c){c.addClass("list-section-header")}if(d){d.addClass("list-section-footer")}}else{if(c&&c.hasStyle("header")||d&&d.hasStyle("header")){continue}f.removeClass("list-section-header");f.removeClass("list-section-footer")}}},willRemoveChildComponent:function(a){this.parent(a);if(this._selectedItem===a){this.clearSelectedItem()}},didRemoveChildComponent:function(a){this.parent(a);if(a instanceof Moobile.ListItem){a.removeEvent("tapstart",this.bound("_onItemTapStart"));a.removeEvent("tapend",this.bound("_onItemTapEnd"));a.removeEvent("tap",this.bound("_onItemTap"))}},didChangeState:function(a){this.parent(a);if(a==="disabled"||a==null){this.getChildComponents().invoke("setDisabled",a)}},_onItemTapStart:function(b,a){if(this._selectable&&!a.isSelected()){a.setHighlighted(true)}},_onItemTapEnd:function(b,a){if(this._selectable&&!a.isSelected()){a.setHighlighted(false)}},_onItemTap:function(b,a){if(this._selectable){this.setSelectedItem(a)}}});Moobile.Component.defineRole("list",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.List,a,"data-list"))});Moobile.Component.defineStyle("grouped",Moobile.List,{attach:function(a){a.addClass("style-grouped")},detach:function(a){a.removeClass("style-grouped")}});Moobile.ListItem=new Class({Extends:Moobile.Control,_image:null,_label:null,_detail:null,options:{tagName:"li"},willBuild:function(){this.parent();this.addClass("list-item");var c=this.getRoleElement("image");var a=this.getRoleElement("label");var b=this.getRoleElement("detail");if(a===null){a=document.createElement("div");a.ingest(this.element);a.inject(this.element);a.setRole("label")}if(c===null){c=document.createElement("img");c.inject(this.element,"top");c.setRole("image")}if(b===null){b=document.createElement("div");b.inject(this.element);b.setRole("detail")}},destroy:function(){this._label=null;this._image=null;this._detail=null;this.parent()},setLabel:function(a){if(this._label===a){return this}a=Moobile.Text.from(a);if(this._label){this._label.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._label=a;this._label.addClass("list-item-label");this.toggleClass("list-item-label-empty",this._label.isEmpty());return this},getLabel:function(){return this._label},setImage:function(a){if(this._image===a){return this}a=Moobile.Image.from(a);if(this._image){this._image.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._image=a;this._image.addClass("list-item-image");this.toggleClass("list-item-image-empty",this._image.isEmpty());return this},getImage:function(){return this._image},setDetail:function(a){if(this._detail===a){return this}a=Moobile.Text.from(a);if(this._detail){this._detail.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._detail=a;this._detail.addClass("list-item-detail");this.toggleClass("list-item-detail-empty",this._detail.isEmpty());return this},getDetail:function(){return this._detail},shouldAllowState:function(a){if(this.hasStyle("header")&&(a==="highlighted"||a==="selected"||a==="disabled")){return false}return this.parent(a)}});Moobile.ListItem.from=function(b){if(b instanceof Moobile.ListItem){return b}var a=new Moobile.ListItem();a.setLabel(b);return a};Moobile.Component.defineRole("item",Moobile.List,null,function(a){this.addItem(Moobile.Component.create(Moobile.ListItem,a,"data-item"))});Moobile.Component.defineRole("header",Moobile.List,null,function(a){this.addItem(Moobile.Component.create(Moobile.ListItem,a,"data-item").setStyle("header"))});Moobile.Component.defineRole("image",Moobile.ListItem,null,function(a){this.setImage(Moobile.Component.create(Moobile.Image,a,"data-image"))});Moobile.Component.defineRole("label",Moobile.ListItem,null,function(a){this.setLabel(Moobile.Component.create(Moobile.Text,a,"data-label"))});Moobile.Component.defineRole("detail",Moobile.ListItem,null,function(a){this.setDetail(Moobile.Component.create(Moobile.Text,a,"data-detail"))});Moobile.Component.defineRole("list-item",Moobile.List,null,function(a){console.log('[DEPRECATION NOTICE] The role "list-item" will be removed in 0.4, use the role "item" instead');this.addItem(Moobile.Component.create(Moobile.ListItem,a,"data-list-item"))});Moobile.Component.defineStyle("header",Moobile.ListItem,{attach:function(a){a.addClass("style-header")},detach:function(a){a.removeClass("style-header")}});Moobile.Component.defineStyle("checked",Moobile.ListItem,{attach:function(a){a.addClass("style-checked")},detach:function(a){a.removeClass("style-checked")}});Moobile.Component.defineStyle("disclosed",Moobile.ListItem,{attach:function(a){a.addClass("style-disclosed")},detach:function(a){a.removeClass("style-disclosed")}});Moobile.Component.defineStyle("detailed",Moobile.ListItem,{attach:function(a){a.addClass("style-detailed")},detach:function(a){a.removeClass("style-detailed")}});Moobile.ActivityIndicator=new Class({Extends:Moobile.Control,willBuild:function(){this.parent();this.addClass("activity-indicator")},start:function(){return this.addClass("active")},stop:function(){return this.removeClass("active")}});Moobile.Component.defineRole("activity-indicator",null,null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ActivityIndicator,a,"data-activity-indicator"))});Moobile.Image=new Class({Extends:Moobile.Control,_image:null,_source:null,_loaded:false,_originalSize:{x:0,y:0},options:{tagName:"img",preload:false},willBuild:function(){this.parent();this.hide();this.addClass("image");var a=this.element.get("src");if(a){this.setSource(a)}},destroy:function(){if(this._image){this._image.removeEvent("load",this.bound("_onLoad"));this._image.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";this._image=null}this.element.set("src","data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==");this.parent()},setSource:function(a){this._source=a||"";if(this._image){this._image.removeEvent("load",this.bound("_onLoad"));this._image=null}if(a){if(this.options.preload){this._loaded=false;this._image=new Image();this._image.src=a;this._image.addEvent("load",this.bound("_onLoad"))}else{this._load()}}else{this._unload()}return this},getSource:function(){return this._source},getImage:function(){return this._image},getOriginalSize:function(){return this._originalSize},isLoaded:function(){return this._loaded},isEmpty:function(){return !this.getSource()},show:function(){return this.isEmpty()?this:this.parent()},_load:function(){this._loaded=true;if(this.options.preload){this._originalSize.x=this._image.width;this._originalSize.y=this._image.height}this.element.set("src",this._source);this.show()},_unload:function(){this._loaded=false;if(this.options.preload){this._originalSize.x=0;this._originalSize.y=0}this.element.erase("src");this.fireEvent("unload");this.hide()},_onLoad:function(){this.fireEvent("preload");this._load()}});Moobile.Image.from=function(a){if(a instanceof Moobile.Image){return a}var b=new Moobile.Image();b.setSource(a);return b};Moobile.Component.defineRole("image",null,null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Image,a,"data-image"))});Moobile.Text=new Class({Extends:Moobile.Control,options:{tagName:"span"},willBuild:function(){this.parent();this.addClass("text")},setText:function(a){this.element.set("html",a instanceof Moobile.Text?a.getText():(a||typeof a==="number"?a+"":""));return this},getText:function(){return this.element.get("html")},isEmpty:function(){return !this.getText()}});Moobile.Text.from=function(a){if(a instanceof Moobile.Text){return a}var b=new Moobile.Text();b.setText(a);return b};Moobile.Component.defineRole("text",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Text,a,"data-text"))});Moobile.Alert=new Class({Extends:Moobile.Component,_title:null,_message:null,_buttons:[],boxElement:null,contentElement:null,headerElement:null,footerElement:null,overlay:null,options:{layout:"horizontal"},willBuild:function(){this.parent();this.addClass("alert");this.addEvent("animationend",this.bound("_onAnimationEnd"));this.overlay=new Moobile.Overlay();this.overlay.hide();this.addChildComponent(this.overlay);this.headerElement=document.createElement("div");this.headerElement.addClass("alert-header");this.footerElement=document.createElement("div");this.footerElement.addClass("alert-footer");this.contentElement=document.createElement("div");this.contentElement.addClass("alert-content");this.boxElement=document.createElement("div");this.boxElement.addClass("alert-box");this.boxElement.grab(this.headerElement);this.boxElement.grab(this.contentElement);this.boxElement.grab(this.footerElement);this.element.grab(this.boxElement);var a=this.options.layout;if(a){this.addClass("alert-layout-"+a)}},didBuild:function(){this.parent();this.setTitle("");this.setMessage("")},destroy:function(){this.removeEvent("animationend",this.bound("_onAnimationEnd"));this._title=null;this._message=null;this.boxElement=null;this.headerElement=null;this.footerElement=null;this.contentElement=null;this.overlay.destroy();this.overlay=null;this.parent()},setTitle:function(a){if(this._title===a){return this}a=Moobile.Text.from(a);if(this._title){this._title.replaceWithComponent(a,true)}else{this.addChildComponentInside(a,this.headerElement)}this._title=a;this._title.addClass("alert-title");this.toggleClass("alert-title-empty",this._title.isEmpty());return this},getTitle:function(){return this._title},setMessage:function(a){if(this._message===a){return this}a=Moobile.Text.from(a);if(this._message){this._message.replaceWithComponent(a,true)}else{this.addChildComponentInside(a,this.contentElement)}this._message=a;this._message.addClass("alert-message");this.toggleClass("alert-message-empty",this._message.isEmpty());return this},getMessage:function(){return this._message},addButton:function(b,a){return this.addChildComponentInside(Moobile.Button.from(b),this.footerElement,a)},addButtonAfter:function(a,b){return this.addChildComponentAfter(Moobile.Button.from(a),b)},addButtonBefore:function(a,b){return this.addChildComponentBefore(Moobile.Button.from(a),b)},getButtons:function(){return this.getChildComponentsOfType(Moobile.Button)},getButton:function(a){return this.getChildComponentOfType(Moobile.Button,a)},getButtonAt:function(a){return this.getChildComponentOfTypeAt(Moobile.Button,a)},removeButton:function(b,a){return this.removeChildComponent(b,a)},removeAllButtons:function(a){return this.removeAllChildComponentsOfType(Moobile.Button,a)},setDefaultButton:function(a){if(this.hasChildComponent(a)){a.addClass("is-default")}return this},setDefaultButtonIndex:function(a){return this.setDefaultButton(this.getChildComponentOfTypeAt(Moobile.Button,a))},showAnimated:function(){this.willShow();this.element.addClass("show-animated").removeClass("hidden");this.overlay.showAnimated();return this},hideAnimated:function(){this.willHide();this.element.addClass("hide-animated");this.overlay.hideAnimated();return this},didAddChildComponent:function(a){this.parent(a);if(a instanceof Moobile.Button){a.addEvent("tap",this.bound("_onButtonTap"));this._buttons.include(a)}},didRemoveChildComponent:function(a){this.parent(a);if(a instanceof Moobile.Button){a.removeEvent("tap",this.bound("_onButtonTap"));this._buttons.erase(a)}},willShow:function(){this.parent();if(this.getParentView()===null){var a=Moobile.Window.getCurrentInstance();if(a){a.addChildComponent(this)}}if(this._buttons.length===0){this.addButton("OK")}},didHide:function(){this.parent();this.removeFromParentComponent()},_onButtonTap:function(c,b){var a=this.getChildComponentsOfType(Moobile.Button).indexOf(b);if(a>=0){this.fireEvent("dismiss",[b,a])}this.hideAnimated()},_onAnimationEnd:function(a){a.stop();if(this.hasClass("show-animated")){this.removeClass("show-animated");this.didShow()}if(this.hasClass("hide-animated")){this.addClass("hidden").removeClass("hide-animated");this.didHide()}}});(function(){var d=Element.prototype.setStyle;var a=Element.prototype.getStyle;var c=["Khtml","O","Ms","Moz","Webkit"];var b={};Element.implement({getPrefixed:function(g){g=g.camelCase();if(g in this.style){return g}if(b[g]!==undefined){return b[g]}var h=g.charAt(0).toUpperCase()+g.slice(1);for(var f=0;f<c.length;f++){var e=c[f]+h;if(e in this.style){b[g]=e;break}}if(b[g]===undefined){b[g]=g}return b[g]},setStyle:function(f,e){return d.call(this,this.getPrefixed(f),e)},getStyle:function(e){return a.call(this,this.getPrefixed(e))}})})();(function(){[Element,Window,Document].invoke("implement",{hasEvent:function(g){var f=this.retrieve("events"),h=(f&&f[g])?f[g].values:null;if(h){for(var e=h.length;e--;){if(e in h){return true}}}return false}});var d=function(g,h,e,f){h=g[h];e=g[e];return function(i,j){if(!j){j=f}if(e&&!this.hasEvent(j)){e.call(this,i,j)}if(h){h.call(this,i,j)}}};var b=function(g,f,h,e){return function(i,j){f[h].call(this,i,j||e);g[h].call(this,i,j||e)}};var c=Element.Events;Element.defineCustomEvent=function(e,g){var f=c[g.base];g.onAdd=d(g,"onAdd","onSetup",e);g.onRemove=d(g,"onRemove","onTeardown",e);c[e]=f?Object.append({},g,{base:f.base,condition:function(h){return(!f.condition||f.condition.call(this,h))&&(!g.condition||g.condition.call(this,h))},onAdd:b(g,f,"onAdd",e),onRemove:b(g,f,"onRemove",e)}):g;return this};var a=function(e){var f="on"+e.capitalize();Element[e+"CustomEvents"]=function(){Object.each(c,function(h,g){if(h[f]){h[f].call(h,g)}})};return a};a("enable")("disable")})();(function(){var a=function(){window.fireEvent("ready")};Element.defineCustomEvent("ready",{onSetup:function(){if(Browser.Platform.cordova){document.addEventListener("deviceready",a);return}window.addEvent("domready",a)},onTeardown:function(){if(Browser.Platform.cordova){document.removeEventListener("deviceready",a);return}window.removeEvent("domready",a)}});window.addEvent("ready",function(){if(parent&&parent.fireEvent){parent.fireEvent("appready")}})})();(function(){var a="";if(Browser.safari||Browser.chrome||Browser.Platform.ios){a="webkit"}else{if(Browser.firefox){a="Moz"}else{if(Browser.opera){a="o"}else{if(Browser.ie){a="ms"}}}}Element.NativeEvents[a+"TransitionEnd"]=2;Element.Events.transitionend={base:(a+"TransitionEnd"),onAdd:function(){},onRemove:function(){}};Element.NativeEvents[a+"AnimationEnd"]=2;Element.Events.animationend={base:(a+"AnimationEnd"),onAdd:function(){},onRemove:function(){}};Element.defineCustomEvent("owntransitionend",{base:"transitionend",condition:function(b){b.stop();return b.target===this}});Element.defineCustomEvent("ownanimationend",{base:"animationend",condition:function(b){b.stop();return b.target===this}})})();if(!Browser.Features.Touch){(function(){var f=null;var e=null;var c=function(i){if(i.fake){return}var h=document.createEvent("MouseEvent");h.fake=true;h.initMouseEvent(i.type,true,true,window,0,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);f.dispatchEvent(h)};var a=function(h){if(f===null){f=h.target;e=h.event.timeStamp;c(h.event)}};var b=function(h){if(f){c(h.event)}};var d=function(h){if(f){c(h.event);f=null;e=null}};document.addEvent("mousedown",a);document.addEvent("mousemove",b);document.addEvent("mouseup",d);var g=function(h){var i={identifier:e,target:f,pageX:h.page.x,pageY:h.page.y,clientX:h.client.x,clientY:h.client.y};h.touches=h.targetTouches=h.changedTouches=[i];if(h.event.fake){return true}return false};Element.defineCustomEvent("touchstart",{base:"mousedown",condition:g});Element.defineCustomEvent("touchmove",{base:"mousemove",condition:g});Element.defineCustomEvent("touchend",{base:"mouseup",condition:g})})()}(function(){var b=0;var a=0;var d=0;var h=0;var c=0;var f=0;var i=true;var g=function(j){if(j.changedTouches.length>1){i=false;return}i=true;b=j.changedTouches[0].clientX;a=j.changedTouches[0].clientY;d=b+10;h=b-10;c=a+10;f=a-10};var e=function(k){if(k.changedTouches.length>1){i=false;return}if(i){var j=k.changedTouches[0].clientX;var l=k.changedTouches[0].clientY;i=!(j>d||j<h||l>c||l<f)}else{this.fireEvent("tapend",k)}};Element.defineCustomEvent("tap",{base:"touchend",condition:function(j){return i},onSetup:function(){this.addEvent("touchstart",g);this.addEvent("touchmove",e)},onTeardown:function(){this.removeEvent("touchstart",g);this.removeEvent("touchmove",e)}});Element.defineCustomEvent("tapstart",{base:"touchstart",condition:function(j){return j.changedTouches.length===1}});Element.defineCustomEvent("tapmove",{base:"touchmove",condition:function(j){return j.changedTouches.length===1}});Element.defineCustomEvent("tapend",{base:"touchend",condition:function(j){return j.changedTouches.length===1}})})();if(Browser.Features.Touch){(function(){delete Element.NativeEvents.mousedown;delete Element.NativeEvents.mousemove;delete Element.NativeEvents.mouseup;Element.defineCustomEvent("mousedown",{base:"touchstart",}).defineCustomEvent("mousemove",{base:"touchmove"}).defineCustomEvent("mouseup",{base:"touchend",})})()}if(!window.Moobile){window.Moobile={}}Moobile.Request=new Class({Extends:Request,options:{isSuccess:function(){var a=this.status;return(a===0||(a>=200&&a<300))}}});Moobile.Scroller=new Class({Extends:Moobile.EventFirer,contentElement:null,contentWrapperElement:null,options:{scroll:"vertial",scrollbar:"vertical",momentum:true,bounce:true},initialize:function(c,b,a){this.contentElement=document.id(c);this.contentWrapperElement=document.id(b);this.contentWrapperElement.addClass("scrollable");this.setOptions(a);return this},destroy:function(){this.contentElement=null;this.contentWrapperElement=null;return this},getName:function(){throw new Error("You must override this method")},scrollTo:function(a,c,b){throw new Error("You must override this method")},scrollToElement:function(a,b){throw new Error("You must override this method")},refresh:function(){throw new Error("You must override this method")},getScroll:function(){throw new Error("You must override this method")}});Moobile.Scroller.create=function(f,e,g,b){var a=null;g=g?Array.from(g):["IScroll.Android","Native","IScroll"];for(var c=0;c<g.length;c++){var d=Class.parse("Moobile.Scroller."+g[c]);if(d===null){throw new Error("The scroller scroller "+g[c]+" does not exists")}if(d.supportsCurrentPlatform===undefined||d.supportsCurrentPlatform&&d.supportsCurrentPlatform.call(this)){a=d;break}}if(a===null){throw new Error("A proper scroller was not found")}return new a(f,e,b)};window.addEvent("domready",function(b){var a={};document.addEvent("touchstart",function(j){var h=j.changedTouches;for(var f=0,c=h.length;f<c;f++){var k=h[f];var g=k.target;var d=k.identifier;if(g.tagName.match(/input|textarea|select/i)){a[d]=false;return}if(g.hasClass("scrollable")||g.getParent(".scrollable")){a[d]=true}else{scroll[d]=false;j.preventDefault()}}});document.addEvent("touchmove",function(g){var f=g.changedTouches;for(var d=0,c=f.length;d<c;d++){if(a[f[d].identifier]===false){g.preventDefault()}}});document.addEvent("touchend",function(g){var f=g.changedTouches;for(var d=0,c=f.length;d<c;d++){delete a[f[d].identifier]}})});(function(){var b=null;var a=function(c){var d={identifier:b,target:c.target,pageX:c.pageX,pageY:c.pageY,clientX:c.clientX,clientY:c.clientY};c.touches=c.targetTouches=c.changedTouches=[d]};Moobile.Scroller.IScroll=new Class({Extends:Moobile.Scroller,scroller:null,initialize:function(e,d,c){this.parent(e,d,c);this.scroller=new iScroll(d,{scrollbarClass:"scrollbar-",hScroll:this.options.scroll==="both"||this.options.scroll==="horizontal",vScroll:this.options.scroll==="both"||this.options.scroll==="vertical",hScrollbar:this.options.scrollbar==="both"||this.options.scrollbar==="horizontal",vScrollbar:this.options.scrollbar==="both"||this.options.scrollbar==="vertical",momentum:this.options.momentum,bounce:this.options.bounce,hideScrollbar:true,fadeScrollbar:true,checkDOMChanges:true,onBeforeScrollStart:this.bound("_onBeforeScrollStart"),onScrollStart:this.bound("_onScrollStart"),onScrollMove:this.bound("_onScrollMove"),onScrollEnd:this.bound("_onScrollEnd"),onTouchEnd:this.bound("_onTouchEnd")});window.addEvent("resize",this.bound("refresh"));return this},destroy:function(){window.removeEvent("resize",this.bound("refresh"));this.scroller.destroy();this.scroller=null;return this.parent()},getName:function(){return"iscroll"},scrollTo:function(c,e,d){this.scroller.scrollTo(-c,-e,d||0);return this},scrollToElement:function(c,d){this.scroller.scrollToElement(document.id(c),d||0);return this},refresh:function(){this.scroller.refresh();return this},getScroll:function(){return{x:-this.scroller.x,y:-this.scroller.y}},_onBeforeScrollStart:function(d){var c=d.target.get("tag");if(c!=="input"&&c!=="select"&&c!=="textarea"){d.preventDefault()}},_onScrollStart:function(c){if(!("touches" in c)){if(b){return this}if(b===null){b=String.uniqueID();a(c)}}this.fireEvent("touchstart",c);this.fireEvent("scrollstart")},_onScrollMove:function(c){if(b){a(c)}this.fireEvent("touchmove",c);this.fireEvent("scroll")},_onScrollEnd:function(){this.fireEvent("scroll");this.fireEvent("scrollend")},_onTouchEnd:function(c){if(b){a(c);b=null}this.fireEvent("touchend",c)}});Moobile.Scroller.IScroll.supportsCurrentPlatform=function(){return true}})();(function(){var d;var c;var b=0;var e=["ms","moz","webkit","o"];for(var a=0;a<e.length&&!window.requestAnimationFrame;++a){d=window[e[a]+"RequestAnimationFrame"];c=window[e[a]+"CancelAnimationFrame"]||window[e[a]+"CancelRequestAnimationFrame"]}if(d==undefined){d=function(j,g){var f=new Date().getTime();var h=Math.max(0,16-(f-b));var i=window.setTimeout(function(){j(f+h)},h);b=f+h;return i}}if(c===undefined){c=function(f){clearTimeout(f)}}Moobile.Scroller.Native=new Class({Extends:Moobile.Scroller,_animating:false,_animation:null,contentScrollerElement:null,initialize:function(i,h,f){this.parent(i,h,f);if(this.options.snapToPage){this.options.momentum=false;this.options.bounce=false}this.contentWrapperElement.setStyle("overflow","auto");this.contentWrapperElement.setStyle("overflow-scrolling","touch");var g={top:0,left:0,bottom:0,right:0,position:"absolute",overflow:"auto","overflow-scrolling":this.options.momentum?"touch":"auto"};this.contentScrollerElement=document.createElement("div");this.contentScrollerElement.setStyles(g);this.contentScrollerElement.wraps(i);this.contentScrollerElement.addEvent("touchstart",this.bound("_onTouchStart"));this.contentScrollerElement.addEvent("touchmove",this.bound("_onTouchMove"));this.contentScrollerElement.addEvent("touchend",this.bound("_onTouchEnd"));window.addEvent("orientationchange",this.bound("_onOrientationChange"));return this},destroy:function(){this.contentScrollerElement.removeEvent("touchstart",this.bound("_onTouchStart"));this.contentScrollerElement.removeEvent("touchend",this.bound("_onTouchMove"));this.contentScrollerElement.removeEvent("touchend",this.bound("_onTouchEnd"));this.contentScrollerElement.removeEvent("scroll",this.bound("_onScroll"));this.contentScrollerElement=null;this.contentScroller=null;window.addEvent("orientationchange",this.bound("_onOrientationChange"));this.parent()},getName:function(){return"native"},scrollTo:function(q,p,m){q=q||0;p=p||0;m=m||0;if(this._animating){this._animating=false;c(this._animation)}var h=Date.now();var r=this;var n=this.contentScrollerElement;var j=Math.abs(q);var g=Math.abs(p);var i=n.scrollLeft;var f=n.scrollTop;var l=q-i;var k=p-f;var o=function(){if(n.scrollLeft===q&&n.scrollTop===p){r.fireEvent("scroll");r._animating=false;r._animation=null;return}var t=((Date.now()-h)*(q-i)/m);var s=((Date.now()-h)*(p-f)/m);var v=t+i;var u=s+f;if((v>=q&&l>=0)||(v<q&&l<0)){v=q}if((u>=p&&k>=0)||(u<p&&k<0)){u=p}n.scrollLeft=v;n.scrollTop=u;r._animating=true;r._animation=d(o)};this._animation=d(o);return this},scrollToElement:function(f,i){var g=document.id(f);if(g){var h=f.getPosition(this.contentElement);this.scrollTo(h.x,h.y,i)}return this},refresh:function(){var f=this.contentWrapperElement.getSize();var i=this.contentElement.getScrollSize();if(this.options.momentum){var h=this.options.scroll==="both"||this.options.scroll==="horizontal";var g=this.options.scroll==="both"||this.options.scroll==="vertical";if(g&&i.y<=f.y){this.contentElement.setStyle("min-height",f.y+1)}if(h&&i.x<=f.x){this.contentElement.setStyle("min-width",f.x+1)}}return this},_attachEvents:function(){this.contentScrollerElement.addEvent("scroll",this.bound("_onScroll"));return this},_detachEvents:function(){this.contentScrollerElement.removeEvent("scroll",this.bound("_onScroll"));return this},getSize:function(){return this.contentScrollerElement.getSize()},getScroll:function(){return this.contentScrollerElement.getScroll()},_onScroll:function(){this.fireEvent("scroll")},_onTouchStart:function(f){this.fireEvent("touchstart",f)},_onTouchMove:function(f){this.fireEvent("touchmove",f)},_onTouchEnd:function(f){this.fireEvent("touchend",f)},_onOrientationChange:function(){this.refresh()}});Moobile.Scroller.Native.supportsCurrentPlatform=function(){return Browser.Platform.ios&&"WebkitOverflowScrolling" in document.createElement("div").style}})();Moobile.Overlay=new Class({Extends:Moobile.Component,willBuild:function(){this.parent();this.addClass("overlay");this.addEvent("animationend",this.bound("_onAnimationEnd"))},destroy:function(){this.removeEvent("animationend",this.bound("_onAnimationEnd"));this.parent()},showAnimated:function(){this.willShow();this.addClass("show-animated").removeClass("hidden");return this},hideAnimated:function(){this.willHide();this.element.addClass("hide-animated");return this},_onAnimationEnd:function(a){a.stop();if(this.hasClass("show-animated")){this.removeClass("show-animated");this.didShow()}if(this.hasClass("hide-animated")){this.removeClass("hide-animated");this.addClass("hidden");this.didHide()}}});String.implement({toCamelCase:function(){return this.camelCase().replace("-","").replace(/\s\D/g,function(a){return a.charAt(1).toUpperCase()})}});Array.implement({find:function(b){for(var a=0;a<this.length;a++){var c=b.call(this,this[a]);if(c===true){return this[a]}}return null},getLastItemAtOffset:function(a){a=a?a:0;return this[this.length-1-a]?this[this.length-1-a]:null}});Moobile.View=new Class({Extends:Moobile.Component,_layout:null,contentElement:null,contentWrapperElement:null,options:{layout:"vertical"},willBuild:function(){this.parent();this.addClass("view");var a=this.getRoleElement("content")||this.getRoleElement("view-content");if(a===null){a=document.createElement("div");a.ingest(this.element);a.inject(this.element);a.setRole("content")}var b=this.getRoleElement("content-wrapper");if(b===null){b=document.createElement("div");b.wraps(a);b.setRole("content-wrapper")}},didBuild:function(){this.parent();var a=this.element.get("class");if(a){a.split(" ").each(function(b){b=b.trim();if(b){this.contentElement.addClass(b+"-content")}},this)}this.setLayout(this.options.layout)},destroy:function(){this.contentElement=null;this.parent()},enableTouch:function(){this.removeClass("disable").addClass("enable");return this},disableTouch:function(){this.removeClass("enable").addClass("disable");return this},addChildComponent:function(b,a){if(a==="header"){return this.parent(b,"top")}if(a==="footer"){return this.parent(b,"bottom")}return this.addChildComponentInside(b,this.contentElement,a)},willAddChildComponent:function(a){this.parent(a);a.setParentView(this)},willRemoveChildComponent:function(a){this.parent(a);a.setParentView(null)},getContentElement:function(){return this.contentElement},getContentWrapperElement:function(){return this.contentWrapperElement},setLayout:function(a){if(this._layout===a){return this}this.willChangeLayout(a);if(this._layout){this.removeClass("view-layout-"+this._layout)}this._layout=a;if(this._layout){this.addClass("view-layout-"+this._layout)}this.didChangeLayout(a);return this},getLayout:function(){return this._layout},willChangeLayout:function(a){},didChangeLayout:function(a){}});Class.refactor(Moobile.Component,{_parentView:null,setParentView:function(a){if(this._parentView===a){return this}this.parentViewWillChange(a);this._parentView=a;this.parentViewDidChange(a);if(this instanceof Moobile.View){return this}var b=function(c){return !(c instanceof Moobile.View)};this.getChildComponents().filter(b).invoke("setParentView",a);return this},getParentView:function(){return this._parentView},parentViewWillChange:function(a){},parentViewDidChange:function(a){},willAddChildComponent:function(a){this.previous(a);a.setParentView(this._parentView)},willRemoveChildComponent:function(a){this.previous(a);a.setParentView(null)}});Moobile.View.at=function(d,b,a){var c=Element.at(d);if(c){return Moobile.Component.create(Moobile.View,c,"data-view",b,a)}return null};Moobile.Component.defineRole("view",null,null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.View,a,"data-view"))});Moobile.Component.defineRole("content",Moobile.View,{traversable:true},function(a){this.contentElement=a;this.contentElement.addClass("view-content")});Moobile.Component.defineRole("content-wrapper",Moobile.View,{traversable:true},function(a){this.contentWrapperElement=a;this.contentWrapperElement.addClass("view-content-wrapper")});Moobile.Component.defineRole("view-content",Moobile.View,{traversable:true},function(a){console.log('[DEPRECATION NOTICE] The role "view-content" will be removed in 0.4, use the role "content" instead');this.contentElement=a;this.contentElement.addClass("view-content")});Moobile.Component.defineStyle("dark",Moobile.View,{attach:function(a){a.addClass("style-dark")},detach:function(a){a.removeClass("style-dark")}});Moobile.Component.defineStyle("light",Moobile.View,{attach:function(a){a.addClass("style-light")},detach:function(a){a.removeClass("style-light")}});Moobile.ViewStack=new Class({Extends:Moobile.View,willBuild:function(){this.parent();this.addClass("view-stack")}});Moobile.Component.defineRole("view-stack",null,null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ViewStack,a,"data-view-stack"))});Moobile.ScrollView=new Class({Extends:Moobile.View,_activeTouch:null,_activeTouchTime:null,_activeTouchScroll:null,_activeTouchDuration:null,_scroller:null,_offset:{x:null,y:null,},_page:{x:null,y:null,},_pageOffset:{x:0,y:0,},options:{scroller:["Native","IScroll"],scroll:"vertical",scrollbar:"vertical",bounce:Browser.Platform.ios,momentum:true,snapToPage:false,snapToPageAt:20,snapToPageSizeX:null,snapToPageSizeY:null,snapToPageDuration:150,snapToPageDelay:150,initialPageX:0,initialPageY:0,initialScrollX:0,initialScrollY:0},willBuild:function(){this.parent();this.addClass("scroll-view")},didBuild:function(){this.parent();if("scrollX" in this.options||"scrollY" in this.options){console.log('[DEPRECATION NOTICE] The options "scrollX" and "scrollY" will be removed in 0.4, use the "scroll" option instead');if(this.options.scrollX&&this.options.scrollY){this.options.scroll="both"}else{if(this.options.scrollX){this.options.scroll="horizontal"}if(this.options.scrollY){this.options.scroll="vertical"}}}var b={scroll:this.options.scroll,scrollbar:this.options.scrollbar,bounce:this.options.bounce,momentum:this.options.momentum,snapToPage:this.options.snapToPage,snapToPageAt:this.options.snapToPageAt,snapToPageSizeX:this.options.snapToPageSizeX,snapToPageSizeY:this.options.snapToPageSizeY,snapToPageDuration:this.options.snapToPageDuration,snapToPageDelay:this.options.snapToPageDelay};this._scroller=Moobile.Scroller.create(this.contentElement,this.contentWrapperElement,this.options.scroller,b);this._scroller.addEvent("scroll",this.bound("_onScroll"));this._scroller.addEvent("scrollend",this.bound("_onScrollEnd"));this._scroller.addEvent("scrollstart",this.bound("_onScrollStart"));this._scroller.addEvent("touchcancel",this.bound("_onTouchCancel"));this._scroller.addEvent("touchstart",this.bound("_onTouchStart"));this._scroller.addEvent("touchend",this.bound("_onTouchEnd"));var a=this._scroller.getName();if(a){this.addClass(a+"-engine")}},didBecomeReady:function(){this.parent();var a=this.options.initialScrollX;var c=this.options.initialScrollY;var b="scrollTo";if(this.options.snapToPage){a=this.options.initialPageX;c=this.options.initialPageY;b="scrollToPage"}this._scroller.refresh();this[b].call(this,a,c)},destroy:function(){this._scroller.removeEvent("scroll",this.bound("_onScroll"));this._scroller.removeEvent("scrollend",this.bound("_onScrollEnd"));this._scroller.removeEvent("scrollstart",this.bound("_onScrollStart"));this._scroller.removeEvent("touchcancel",this.bound("_onTouchCancel"));this._scroller.removeEvent("touchstart",this.bound("_onTouchStart"));this._scroller.removeEvent("touchend",this.bound("_onTouchEnd"));this._scroller.destroy();this._scroller=null;this.parent()},setContentSize:function(a,b){if(a>=0||a===null){this.contentElement.setStyle("width",a)}if(b>=0||b===null){this.contentElement.setStyle("height",b)}return this},getContentSize:function(){return this.contentElement.getScrollSize()},getContentWrapperSize:function(){return this.contentWrapperElement.getSize()},getContentScroll:function(){return this._scroller.getScroll()},scrollTo:function(a,c,b){this._scroller.scrollTo(a,c,b);return this},scrollToElement:function(a,b){this._scroller.scrollToElement(a);return this},scrollToPage:function(e,d,c){e=e||0;d=d||0;if(e<0){e=0}if(d<0){d=0}var b=this.getContentWrapperSize();var h=this.getContentSize();var l=this.options.snapToPageSizeX||this.getContentWrapperSize().x;var k=this.options.snapToPageSizeY||this.getContentWrapperSize().y;var f=h.x-b.x;var a=h.y-b.y;var j=l*e;var g=k*d;if(j>f){j=f}if(g>a){g=a}var i=this.getContentScroll();if(i.x!==j||i.y!==g){this.scrollTo(j,g,c)}if(this._page.x!==e||this._page.y!==d){this._pageOffset.x=Math.abs(j-e*l);this._pageOffset.y=Math.abs(g-d*k);this.fireEvent("scrolltopage",[e,d],c)}this._page.x=e;this._page.y=d;return this},getPage:function(){var b=0;var e=0;var d=this.options.snapToPageSizeX||this.getContentWrapperSize().x;var c=this.options.snapToPageSizeY||this.getContentWrapperSize().y;if(d&&c){var a=this.getContentScroll();a.x=a.x>0?a.x:0;a.y=a.y>0?a.y:0;b=Math.floor(a.x/d);e=Math.floor(a.y/c)}return{x:b,y:e}},getPageOffset:function(){return this._pageOffset},getScroller:function(){return this._scroller},willHide:function(){this.parent();this._offset=this._scroller.getScroll()},didShow:function(){this.parent();this._scroller.refresh();this._scroller.scrollTo(this._offset.x,this._offset.y)},_snapToPage:function(){var f=this.getContentScroll();f.x=f.x>0?f.x:0;f.y=f.y>0?f.y:0;var c=f.x-this._activeTouchScroll.x;var b=f.y-this._activeTouchScroll.y;var o=Math.abs(c);var n=Math.abs(b);if(c===0&&b===0){return this}var j=this.options.scroll==="both"||this.options.scroll==="horizontal";var h=this.options.scroll==="both"||this.options.scroll==="vertical";var k=this.options.snapToPageAt;var d=this.options.snapToPageDelay;var a=this.options.snapToPageDuration;var i=this.options.snapToPageSizeX||this.getContentWrapperSize().x;var g=this.options.snapToPageSizeY||this.getContentWrapperSize().y;var m=(o-Math.floor(o/i)*i)*100/i;var l=(n-Math.floor(n/g)*g)*100/g;var e=this.getPage();if(c<0||this._pageOffset.x>0){e.x+=1}if(b<0||this._pageOffset.y>0){e.y+=1}if(o>=10&&(m>=k||this._activeTouchDuration<d)){e.x+=c>0?1:-1}if(n>=10&&(l>=k||this._activeTouchDuration<d)){e.y+=b>0?1:-1}this.scrollToPage(e.x,e.y,this.options.snapToPageDuration);this.fireEvent("snaptopage",[e.x,e.y]);return this},_onTouchCancel:function(){this._activeTouch=null;this._activeTouchTime=null;this._activeTouchScroll=null;this._activeTouchDuration=null},_onTouchStart:function(a){var b=a.changedTouches[0];if(this._activeTouch===null){this._activeTouch=b;this._activeTouchTime=Date.now();this._activeTouchScroll=this.getContentScroll()}},_onTouchEnd:function(a){if(a.touches.length>0){return}this._activeTouchDuration=Date.now()-this._activeTouchTime;if(this.options.snapToPage){this._snapToPage()}this._activeTouch=null;this._activeTouchTime=null;this._activeTouchScroll=null;this._activeTouchDuration=null},_onScroll:function(){this.fireEvent("scroll")},_onScrollStart:function(){this.fireEvent("scrollstart")},_onScrollEnd:function(){this.fireEvent("scrollend")},getScrollSize:function(){console.log('[DEPRECATION NOTICE] The method "getScrollSize" will be removed in 0.3, use the method "getContentSize" instead');return this.getContentSize()},getScroll:function(){console.log('[DEPRECATION NOTICE] The method "getScroll" will be removed in 0.3, use the method "getContentScroll" instead');return this.getContentScroll()},});Moobile.ScrollView.at=function(d,b,a){var c=Element.at(d);if(c){return Moobile.Component.create(Moobile.ScrollView,c,"data-view",b,a)}return null};Moobile.Component.defineRole("scroll-view",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ScrollView,a,"data-scroll-view"))});if(!window.Moobile){window.Moobile={}}Moobile.ViewController=new Class({Extends:Moobile.EventFirer,_id:null,_name:null,_title:null,_image:null,_viewReady:false,_viewTransition:null,_parent:null,_children:[],_modal:false,_modalViewController:null,view:null,initialize:function(b,a){this._name=a;this.setOptions(b);this.loadView();if(this.view){this.view.addEvent("ready",this.bound("_onViewReady"));this.viewDidLoad()}window.addEvent("orientationchange",this.bound("_onWindowOrientationChange"));return this},loadView:function(){if(this.view===null){this.view=new Moobile.View()}},showView:function(){this.view.show();return this},hideView:function(){this.view.hide();return this},addChildViewController:function(b){var a=function(){var c=b.getView();if(c){this.view.addChildComponent(c)}};return this._addChildViewControllerAt(b,this._children.length,a)},addChildViewControllerAfter:function(c,d){var a=this.getChildViewControllerIndex(d);if(a===-1){return this}var b=function(){var e=c.getView();if(e){var f=d.getView();if(f){this.view.addChildComponentAfter(e,f)}}};return this._addChildViewControllerAt(c,a+1,b)},addChildViewControllerBefore:function(d,c){var a=this.getChildViewControllerIndex(c);if(a===-1){return this}var b=function(){var e=d.getView();if(e){var f=c.getView();if(f){this.view.addChildComponentBefore(e,f)}}};return this._addChildViewControllerAt(d,a,b)},_addChildViewControllerAt:function(c,a,b){if(this.hasChildViewController(c)){return this}c.removeFromParentViewController();this.willAddChildViewController(c);this._children.splice(a,0,c);c.setParentViewController(this);if(b){b.call(this)}this.didAddChildViewController(c);return this},getChildViewController:function(a){return this._children.find(function(b){return b.getName()===a})},getChildViewControllerAt:function(a){return this._children[a]||null},getChildViewControllerIndex:function(a){return this._children.indexOf(a)},getChildViewControllers:function(){return this._children},hasChildViewController:function(a){return this._children.contains(a)},removeChildViewController:function(c,b){if(!this.hasChildViewController(c)){return this}this.willRemoveChildViewController(c);this._children.erase(c);c.setParentViewController(null);var a=c.getView();if(a){a.removeFromParentComponent()}this.didRemoveChildViewController(c);if(b){c.destroy()}return this},removeFromParentViewController:function(a){if(this._parent){this._parent.removeChildViewController(this,a)}return this},removeAllChildViewControllers:function(a){this._children.filter(function(){return true}).invoke("removeFromParentViewController",a);return this},presentModalViewController:function(e,b){if(this._modalViewController){return this}var d=this.view.getWindow();if(d===null){throw new Error("The view to present is not ready")}this.willPresentModalViewController(e);this._modalViewController=e;this._modalViewController.setParentViewController(this);this._modalViewController.setModal(true);var a=this._modalViewController.getView();var c=d.getChildComponentsOfType(Moobile.View).getLastItemAtOffset(0);d.addChildComponent(a);b=b||new Moobile.ViewTransition.Cover;b.addEvent("start:once",this.bound("_onPresentTransitionStart"));b.addEvent("complete:once",this.bound("_onPresentTransitionCompleted"));b.enter(a,c,d);e.setViewTransition(b);return this},_onPresentTransitionStart:function(){this._modalViewController.viewWillEnter()},_onPresentTransitionCompleted:function(){this._modalViewController.viewDidEnter();this.didPresentModalViewController()},dismissModalViewController:function(){if(this._modalViewController===null){return this}var d=this.view.getWindow();if(d===null){throw new Error("The view to dismiss is not ready")}this.willDismissModalViewController();var a=d.getChildComponentsOfType(Moobile.View).getLastItemAtOffset(1);var c=this._modalViewController.getView();var b=this._modalViewController.getViewTransition();b.addEvent("start:once",this.bound("_onDismissTransitionStart"));b.addEvent("complete:once",this.bound("_onDismissTransitionCompleted"));b.leave(a,c,d);return this},_onDismissTransitionStart:function(){this._modalViewController.viewWillLeave()},_onDismissTransitionCompleted:function(){this._modalViewController.viewDidLeave();this._modalViewController.setParentViewController(this);this._modalViewController.setModal(false);this._modalViewController.destroy();this._modalViewController=null;this.didDismissModalViewController()},getName:function(){return this._name},getId:function(){var a=this.getName();if(a){return a}if(this._id===null){this._id=String.uniqueID()}return this._id},setTitle:function(b){if(this._title===b){return this}if(typeof b==="string"){var a=b;b=new Moobile.Text();b.setText(a)}this._title=b;return this},getTitle:function(){return this._title},setImage:function(b){if(this._image===b){return this}if(typeof b==="string"){var a=b;b=new Moobile.Image();b.setSource(a)}this._image=b;return this},getImage:function(){return this._image},setModal:function(a){this._modal=a},isModal:function(){return this._modal},isViewReady:function(){return this._viewReady},getView:function(){return this.view},setViewTransition:function(a){this._viewTransition=a;return this},getViewTransition:function(){return this._viewTransition},setParentViewController:function(a){this.parentViewControllerWillChange(a);this._parent=a;this.parentViewControllerDidChange(a);return this},getParentViewController:function(){return this._parent},willAddChildViewController:function(a){},didAddChildViewController:function(a){},willRemoveChildViewController:function(a){},didRemoveChildViewController:function(a){},parentViewControllerWillChange:function(a){},parentViewControllerDidChange:function(a){},willPresentModalViewController:function(a){},didPresentModalViewController:function(a){},willDismissModalViewController:function(){},didDismissModalViewController:function(){},viewDidLoad:function(){},viewDidBecomeReady:function(){},viewWillEnter:function(){},viewDidEnter:function(){},viewWillLeave:function(){},viewDidLeave:function(){},viewDidRotate:function(a){},destroy:function(){window.removeEvent("orientationchange",this.bound("_onWindowOrientationChange"));this.removeAllChildViewControllers(true);this.removeFromParentViewController();if(this._modalViewController){this._modalViewController.destroy();this._modalViewController=null}this.view.destroy();this.view=null;if(this._title){this._title.destroy();this._title=null}if(this._image){this._image.destroy();this._image=null}this._parent=null;this._children=null;this._viewTransition=null},_onViewReady:function(){if(this._viewReady===false){this._viewReady=true;this.viewDidBecomeReady()}},_onWindowOrientationChange:function(b){var a=Math.abs(window.orientation)===90?"landscape":"portrait";if(this.didRotate){this.didRotate(a);console.log('[DEPRECATION NOTICE] The method "didRotate" will be removed in 0.4, use the method "viewDidRotate" instead')}this.viewDidRotate(a)}});Moobile.ViewControllerStack=new Class({Extends:Moobile.ViewController,_animating:false,loadView:function(){this.view=new Moobile.ViewStack()},pushViewController:function(f,d){if(this._animating){return this}if(this.getTopViewController()===f){return this}var b=this.getChildViewControllers();f.removeFromParentViewController();f.setViewControllerStack(this);this.willPushViewController(f);this.addChildViewController(f);var a=f;var g=b.getLastItemAtOffset(1);var c=a.getView();var e=g?g.getView():null;this._animating=true;d=d||new Moobile.ViewTransition.None();d.addEvent("start:once",this.bound("onPushTransitionStart"));d.addEvent("complete:once",this.bound("onPushTransitionComplete"));d.enter(c,e,this.view,b.length===1);a.setViewTransition(d);return this},onPushTransitionStart:function(c){var b=this.getChildViewControllers();var a=b.getLastItemAtOffset(0);var d=b.getLastItemAtOffset(1);if(d){d.viewWillLeave()}a.viewWillEnter()},onPushTransitionComplete:function(c){var b=this.getChildViewControllers();var a=b.getLastItemAtOffset(0);var d=b.getLastItemAtOffset(1);if(d){d.viewDidLeave()}this.didPushViewController(a);a.viewDidEnter();this._animating=false},popViewController:function(){if(this._animating){return this}var a=this.getChildViewControllers();if(a.length<=1){return this}var c=a.getLastItemAtOffset(0);var d=a.getLastItemAtOffset(1);this.willPopViewController(c);this._animating=true;var b=c.getViewTransition();b.addEvent("start:once",this.bound("onPopTransitionStart"));b.addEvent("complete:once",this.bound("onPopTransitionComplete"));b.leave(d.getView(),c.getView(),this.view);return this},popViewControllerUntil:function(e){if(this._animating){return this}var a=this.getChildViewControllers();if(a.length<=1){return this}var d=this.getChildViewControllerIndex(e);if(d>-1){for(var c=a.length-2;c>d;c--){var b=this.getChildViewControllerAt(c);b.viewWillLeave();b.viewDidLeave();b.removeFromParentViewController();b.destroy();b=null}}this.popViewController();return this},onPopTransitionStart:function(c){var a=this.getChildViewControllers();var d=a.getLastItemAtOffset(1);var b=a.getLastItemAtOffset(0);d.viewWillEnter();b.viewWillLeave()},onPopTransitionComplete:function(c){var a=this.getChildViewControllers();var b=a.getLastItemAtOffset(0);var d=a.getLastItemAtOffset(1);d.viewDidEnter();b.viewDidLeave();b.removeFromParentViewController();this.didPopViewController(b);b.destroy();b=null;this._animating=false},getTopViewController:function(){return this.getChildViewControllers().getLast()},willAddChildViewController:function(a){this.parent(a);a.setViewControllerStack(this)},willRemoveChildViewController:function(a){this.parent(a);a.setViewControllerStack(null)},willPushViewController:function(a){},didPushViewController:function(a){},willPopViewController:function(a){},didPopViewController:function(a){}});Class.refactor(Moobile.ViewController,{_viewControllerStack:null,setViewControllerStack:function(a){if(this._viewControllerStack===a){return this}this.parentViewControllerStackWillChange(a);this._viewControllerStack=a;this.parentViewControllerStackDidChange(a);if(this instanceof Moobile.ViewControllerStack){return this}var b=function(c){return !(c instanceof Moobile.ViewControllerStack)};this.getChildViewControllers().filter(b).invoke("setViewControllerStack",a);return this},getViewControllerStack:function(){return this._viewControllerStack},parentViewControllerStackWillChange:function(a){},parentViewControllerStackDidChange:function(a){},willAddChildViewController:function(a){this.previous(a);a.setViewControllerStack(this._viewControllerStack)},willRemoveChildViewController:function(a){this.previous(a);a.setViewControllerStack(null)}});Moobile.ViewControllerStack.Navigation=new Class({Extends:Moobile.ViewControllerStack,options:{backButton:true,backButtonLabel:"Back"},willAddChildViewController:function(e){this.parent(e);var a=e.getView();var d=a.getChildComponent("navigation-bar");if(d===null){d=new Moobile.NavigationBar(null,null,"navigation-bar");a.addChildComponent(d,"header")}if(e.isModal()||this.childViewControllers.length===0){return this}if(this.options.backButton){var b=this.topViewController.getTitle()||this.options.backButtonLabel;if(b){var c=new Moobile.Button(null,null,"back");c.setStyle("back");c.setLabel(b);c.addEvent("tap",this.bound("_onBackButtonTap"));d.getItem().addLeftButton(c)}}},didAddChildViewController:function(b){this.parent(b);var a=b.getView().getChildComponent("navigation-bar");if(a===null){return this}var c=b.getTitle();if(c){a.getItem().setTitle(c)}},_onBackButtonTap:function(a){this.popViewController()}});if(!window.Moobile){window.Moobile={}}Moobile.ViewTransition=new Class({Implements:[Events,Options,Class.Binds],initialize:function(a){this.setOptions(a);return this},enter:function(a,d,c,b){a.disableTouch();if(d){d.disableTouch()}this.fireEvent("start");if(b){this.firstAnimation(a,c)}else{this.enterAnimation(a,d,c)}a.show();return this},leave:function(a,c,b){a.disableTouch();c.disableTouch();this.fireEvent("start");this.leaveAnimation(a,c,b);a.show();return this},didEnterFirst:function(a,b){a.enableTouch();this.fireEvent("complete");return this},didEnter:function(a,c,b){if(this.shouldHideViewToHideOnEnter(a,c,b)){c.hide()}c.enableTouch();a.enableTouch();this.fireEvent("complete");return this},didLeave:function(a,c,b){if(this.shouldHideViewToHideOnEnter(a,c,b)){c.hide()}c.enableTouch();a.enableTouch();this.fireEvent("complete");return this},shouldHideViewToHideOnEnter:function(a,c,b){return true},shouldHideViewToHideOnLeave:function(a,c,b){return true},firstAnimation:function(a,b){throw new Error("You must override this method")},enterAnimation:function(a,c,b){throw new Error("You must override this method")},leaveAnimation:function(a,c,b){throw new Error("You must override this method")}});Moobile.ViewTransition.Slide=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var b=function(){a.addClass("first");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("first");d.removeClass("transition-view-to-show");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(a);f.setAnimationClass("transition-slide-enter");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-slide-enter");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didLeave(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-slide-leave");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Cover=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var b=function(){a.addClass("transition-cover-enter");a.addClass("first")}.bind(this);var c=function(){a.removeClass("transition-cover-enter");a.removeClass("first");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(d);f.setAnimationClass("transition-view-to-show");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-cover-enter");f.addClass("transition-view-to-hide")}.bind(this);var c=function(){a.removeClass("transition-cover-enter");f.removeClass("transition-view-to-hide");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(d);g.setAnimationClass("transition-view-to-show");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-cover-leave");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("transition-cover-leave");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(f);g.setAnimationClass("transition-view-to-hide");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Cover.Box=new Class({Extends:Moobile.ViewTransition,overlay:null,wrapper:null,firstAnimation:function(a,b){throw new Error("You cannot use this transition for the first view of a stack")},enterAnimation:function(d,f,e){var a=e.getContentElement();this.overlay=new Moobile.Overlay();this.overlay.addClass("transition-cover-box-overlay");this.overlay.hide();e.addChildComponent(this.overlay);this.wrapper=document.createElement("div");this.wrapper.addClass("transition-cover-box-foreground-view-wrapper");this.wrapper.wraps(d);var b=function(){a.addClass("transition-cover-box-enter");f.addClass("transition-cover-box-background-view");d.addClass("transition-cover-box-foreground-view");this.overlay.showAnimated()}.bind(this);var c=function(){a.removeClass("transition-cover-box-enter");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(this.wrapper);g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-cover-box-leave");this.overlay.hideAnimated()}.bind(this);var c=function(){a.removeClass("transition-cover-box-leave");d.removeClass("transition-cover-box-background-view");f.removeClass("transition-cover-box-foreground-view");this.overlay.removeFromParentComponent();this.overlay.destroy();this.overlay=null;this.didLeave(d,f,e);this.wrapper.destroy();this.wrapper=null}.bind(this);var g=new Moobile.Animation(this.wrapper);g.addEvent("start",b);g.addEvent("end",c);g.start()},shouldHideViewToHideOnEnter:function(a,c,b){return false}});Moobile.ViewTransition.Cover.Page=new Class({Extends:Moobile.ViewTransition,overlay:null,wrapper:null,firstAnimation:function(a,b){throw new Error("You cannot use this transition for the first view of a stack")},enterAnimation:function(d,f,e){var a=e.getContentElement();this.overlay=new Moobile.Overlay();this.overlay.addClass("transition-cover-page-overlay");this.overlay.hide();e.addChildComponent(this.overlay);this.wrapper=document.createElement("div");this.wrapper.addClass("transition-cover-page-foreground-view-wrapper");this.wrapper.wraps(d);var b=function(){a.addClass("transition-cover-page-enter");f.addClass("transition-cover-page-background-view");d.addClass("transition-cover-page-foreground-view");this.overlay.showAnimated()}.bind(this);var c=function(){a.removeClass("transition-cover-page-enter");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(this.wrapper);g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-cover-page-leave");this.overlay.hideAnimated()}.bind(this);var c=function(){a.removeClass("transition-cover-page-leave");d.removeClass("transition-cover-page-background-view");f.removeClass("transition-cover-page-foreground-view");this.overlay.removeFromParentComponent();this.overlay.destroy();this.overlay=null;this.didLeave(d,f,e);this.wrapper.destroy();this.wrapper=null}.bind(this);var g=new Moobile.Animation(this.wrapper);g.addEvent("start",b);g.addEvent("end",c);g.start()},shouldHideViewToHideOnEnter:function(a,c,b){return false}});Moobile.ViewTransition.Cubic=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var g=e.getContentWrapperElement();var b=function(){g.addClass("transition-cubic-perspective");a.addClass("first");d.addClass("transition-view-to-show")}.bind(this);var c=function(){g.removeClass("transition-cubic-perspective");a.removeClass("first");d.removeClass("transition-view-to-show");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(a);f.setAnimationClass("transition-cubic-enter");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var h=e.getContentWrapperElement();var b=function(){h.addClass("transition-cubic-perspective");f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){h.removeClass("transition-cubic-perspective");f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-cubic-enter");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var h=e.getContentWrapperElement();var b=function(){h.addClass("transition-cubic-perspective");f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){h.removeClass("transition-cubic-perspective");f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didLeave(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-cubic-leave");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Drop=new Class({Extends:Moobile.ViewTransition,enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-drop-enter");f.addClass("transition-view-to-hide");d.show()}.bind(this);var c=function(){a.removeClass("transition-drop-enter");f.removeClass("transition-view-to-hide");f.hide();this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(d);g.setAnimationClass("transition-view-to-show");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-drop-leave");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("transition-drop-leave");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(f);g.setAnimationClass("transition-view-to-hide");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Fade=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var b=function(){a.addClass("transition-fade-enter");a.addClass("first")}.bind(this);var c=function(){a.removeClass("transition-fade-enter");a.removeClass("first");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(d);f.setAnimationClass("transition-view-to-show");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-fade-enter");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("transition-fade-enter");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(d);g.setAnimationClass("transition-view-to-show");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-fade-leave");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("transition-fade-leave");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(f);g.setAnimationClass("transition-view-to-hide");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Flip=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var g=e.getContentWrapperElement();var b=function(){g.addClass("transition-flip-perspective");a.addClass("first");d.addClass("transition-view-to-show")}.bind(this);var c=function(){g.removeClass("transition-flip-perspective");a.removeClass("first");d.removeClass("transition-view-to-show");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(a);f.setAnimationClass("transition-flip-enter");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var h=e.getContentWrapperElement();var b=function(){h.addClass("transition-flip-perspective");f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){h.removeClass("transition-flip-perspective");f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-flip-enter");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var h=e.getContentWrapperElement();var b=function(){h.addClass("transition-flip-perspective");f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){h.removeClass("transition-flip-perspective");f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didLeave(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-flip-leave");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.None=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(a,b){this.didEnterFirst(a,b)},enterAnimation:function(a,c,b){this.didEnter(a,c,b)},leaveAnimation:function(a,c,b){this.didLeave(a,c,b)}});if(!window.$moobile){window.$moobile={}}(function(){var a=null;Moobile.Window=new Class({Extends:Moobile.View,initialize:function(d,c,b){a=this;return this.parent(d,c,b)},willBuild:function(){this.parent();this.element.set("class","window")},didBuild:function(){this.parent();this.contentElement.addClass("window-content");this.contentWrapperElement.addClass("window-content-wrapper");this.setReady(true)},didAddChildComponent:function(b){this.parent(b);b.setWindow(this)},didRemoveChildComponent:function(b){this.parent(b);b.setWindow(null)}});Moobile.Window.getCurrentInstance=function(){return a}})();Moobile.WindowController=new Class({Extends:Moobile.ViewController,_rootViewController:null,loadView:function(){var a=document.id("window");if(a===null){a=document.createElement("div");a.inject(document.body)}this.view=new Moobile.Window(a)},setRootViewController:function(a){if(this._rootViewController){this._rootViewController.destroy();this._rootViewController=null}if(a){this.addChildViewController(a)}this._rootViewController=a;return this},getRootViewController:function(){return this._rootViewController}});(function(){var a;Element.defineCustomEvent("touch",{base:"touchend",condition:function(b){if(a||b.targetTouches.length!==0){return false}var d=b.changedTouches[0],c=document.elementFromPoint(d.clientX,d.clientY);do{if(c==this){return true}}while(c&&(c=c.parentNode));return false},onEnable:function(){a=false},onDisable:function(){a=true}})})();if(Browser.Features.iOSTouch){(function(){var a="click";delete Element.NativeEvents[a];Element.defineCustomEvent(a,{base:"touch"})})()}if(Browser.Features.Touch){(function(){var a="pinch",d=a+":threshold",c,e;var b={touchstart:function(f){if(f.targetTouches.length==2){e=true}},touchmove:function(g){if(c||!e){return}g.preventDefault();var f=this.retrieve(d,0.5);if(g.scale<(1+f)&&g.scale>(1-f)){return}e=false;g.pinch=(g.scale>1)?"in":"out";this.fireEvent(a,g)}};Element.defineCustomEvent(a,{onSetup:function(){this.addEvents(b)},onTeardown:function(){this.removeEvents(b)},onEnable:function(){c=false},onDisable:function(){c=true}})})()}(function(){var a="swipe",c=a+":distance",f=a+":cancelVertical",g=50;var b={},e,d;var h=function(){d=false};var i={touchstart:function(j){if(j.touches.length>1){return}var k=j.touches[0];d=true;b={x:k.pageX,y:k.pageY}},touchmove:function(l){if(e||!d){return}var p=l.changedTouches[0],j={x:p.pageX,y:p.pageY};if(this.retrieve(f)&&Math.abs(b.y-j.y)>10){d=false;return}var o=this.retrieve(c,g),n=j.x-b.x,m=n<-o,k=n>o;if(!k&&!m){return}l.preventDefault();d=false;l.direction=(m?"left":"right");l.start=b;l.end=j;this.fireEvent(a,l)},touchend:h,touchcancel:h};Element.defineCustomEvent(a,{onSetup:function(){this.addEvents(i)},onTeardown:function(){this.removeEvents(i)},onEnable:function(){e=false},onDisable:function(){e=true;h()}})})();(function(){var b="touchhold",e=b+":delay",d,f;var a=function(g){clearTimeout(f)};var c={touchstart:function(g){if(g.touches.length>1){a();return}f=(function(){this.fireEvent(b,g)}).delay(this.retrieve(e)||750,this)},touchmove:a,touchcancel:a,touchend:a};Element.defineCustomEvent(b,{onSetup:function(){this.addEvents(c)},onTeardown:function(){this.removeEvents(c)},onEnable:function(){d=false},onDisable:function(){d=true;a()}})})();Class.Instantiate=function(a,b){var c=function(d){if(d.getInstanceOf&&d.getInstanceOf(a)){return}new a(d,b)};return function(d){d.each(c)}};(function(){var b={storage:{},store:function(c,d){this.storage[c]=d},retrieve:function(c){return this.storage[c]||null}};Class.Singleton=function(){this.$className=String.uniqueID()};Class.Singleton.prototype.check=function(d){if(!d){d=b}var c=d.retrieve("single:"+this.$className);if(!c){d.store("single:"+this.$className,this)}return c};var a=function(c){var d=c.prototype.$className;return d?this.retrieve("single:"+d):null};if(("Element" in this)&&Element.implement){Element.implement({getInstanceOf:a})}Class.getInstanceOf=a.bind(b)}).call(this);